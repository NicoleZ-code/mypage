function VideoPlayer(){return{_version:"3.0.1",_useHTML5:!0,_debug:!1,_ready:!1,_instances:{},_cache:{},_player_id:null,_start_time:null,_class_prefix:"utvp_",_swfLoaded:!1,_uuid:null,_volume:-1,_unmutedVolume:-1,_relativePath:function(){var e=location.href,t=e.split("/");return t.length>1&&(delete t[t.length-1],e=t.join("/")),e},_relativeToAbsolutePath:function(e){return-1==e.indexOf("://")&&(e=this._relativePath()+("/"==e[0]?e.substr(1):e)),e},_constants:{PLAYER:"player",FRAME:"player_frame",COVER:"cover",PLAY_TOGGLE:"play_toggle",PLAY_TOGGLE_WRAPPER:"play_toggle_wrapper",BUFFER_WRAPPER:"buffer_wrapper",BUFFER_INDICATOR:"buffer_indicator",SLATE:"slate",VIDEO:"video",CONTROLS:"controls",CONTROL_COVER:"control_cover",PLAY_BTN:"play_btn",PROGRESS_BAR:"progress_bar",PROGRESS_CLICK:"progress_click",PROGRESS_CURRENT:"progress_current",PROGRESS_DOWN:"progress_down",PROGRESS_BACK:"progress_back",TIME_CURRENT_TXT:"time_current",TIME_DURATION_TXT:"time_duration",SWF:"video_swf",VOL_BTN:"volume_btn",VOL_BAR:"volume_bar",VOL_CLICK:"volume_click",VOL_HEAD:"volume_head",VOL_SLIDER:"volume_slider",VOL_BACK:"volume_back",DEFAULT_VOLUME:.2,BACKGROUND:"control-bar-background",CONTROL_BAR_BTNS_CLASS:"control_bar_buttons",TEXT_DISPLAY_CLASS:"text_display",QUART_25:25,QUART_50:50,QUART_75:75,QUART_100:100,FLASH_FALLBACK_SWF:"http://images.undertone.com/ut/re/modules/video/swf/FallbackPlayer.swf",FULL_CONTROLS_CLASS:"full",WEBM:"webm",MP4:"mp4",CONTROL_BTN_FONT_BUFFER:5,THROTTLE_TIME_UPDATE:200,THROTTLE_TIME_UPDATE_PAUSED:300,THROTTLE_PROGRESS_UPDATE:1e3,DATA_ID:"data-player-id",DATA_CLASS:"data-player-class",VIDEO_EVENT_PREFIX:"video_",ICON_PLAY:"icon-play",ICON_PAUSE:"icon-pause",ICON_REPLAY:"icon-replay",ICON_PLAY_TOGGLE:"icon-play-toggle",ICON_VOL_HIGH:"icon-volume-high",ICON_VOL_MUTE:"icon-volume-mute",ICON_CONNECTION:"icon-connection",NULL_TIME:"--:--"},_events:{video:{LOADED_METADATA:"loaded_metadata",LOAD_STARTED:"load_started",LOADED:"loaded",NET_STATUS:"netstatusevent",STARTED:"start",PLAYING:"playing",RESUMED:"resume",PAUSED:"pause",STOPPED:"stopped",VOL_CHANGED:"volume_changed",ENDED:"ended",MUTED:"mute",UNMUTED:"unmute",CLICK_THRU:"click_thru",REWIND:"rewind",VIDEO_REPLAY:"videoreplay",PLAYER_READY:"playerReady",ENDED:"ended",SEEKED:"seeked"},networkState:{NETWORK_EMPTY:0,NETWORK_IDLE:1,NETWORK_LOADING:2,NETWORK_NO_SOURCE:3},readyState:{HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4},HTML5:{DURATION_CHANGE:"durationchange",ENDED:"ended",ERROR:"error",LOADED_DATA:"loadeddata",LOADED_METADATA:"loadedmetadata",LOAD_START:"loadstart",PAUSE:"pause",PLAY:"play",PLAYING:"playing",PROGRESS:"progress",SEEKED:"seeked",SEEKING:"seeking",VOL_CHANGE:"volumechange",TIME_UPDATE:"timeupdate",VIDEO_CLICKED:"video_clicked",READY_STATE:"readystate",NETWORK_STATE:"networkstate",WAITING:"waiting",STALLED:"stalled",ABORT:"abort",SUSPEND:"suspend",CAN_PLAY:"canplay",CAN_PLAY_THROUGH:"canplaythrough",EMPTIED:"emptied"},undertone_tracking:["start","firstQuartile","midpoint","thirdQuartile","complete","pause","resume","rewind","seeked","videoreplay","mute","unmute","ended"]},config:{id:"utp-video-player",uuid:"",slate:null,doCache:!0,endSlate:null,autoplay:!1,source:null,source_mp4:null,source_webm:null,controlbar_class:"utvp_controls",width:null,height:null,muted:!1,volume:.75,minibar:!0,debug:!1,verticallyCenter:!0,showBuffering:!0,playToggle:!0,slateOnMultiPause:!1,html5Controls:!1,clickID:0,clickThru:null,disableSeeking:!1,pauseOnClickThru:!0,forceFlash:!1,pauseOnBuffer:!0,aspectRatio:"",preload:"",displayHidden:!1,reconfig:!0,trackingID:null,showSlates:!0,hideControls:!1,useManualSeekDetection:!1,duration:0,manualSeekTimeBuffer:250,androidNotPausedCheck:0},getVersion:function(){return this._version},ready:function(){return this._ready},clickable:function(e,t){e&&this._instances&&this._instances[e]&&(this._instances[e].clickable=!!t)},isClickable:function(e){return e&&this._instances&&this._instances[e]?this._instances[e].clickable:void 0},_reconfigInstance:function(e){var t=this._getVideo(e.id),i=null;if(t&&!t.paused()&&t.pause(),this._checkAndSetVideoSources(e)){i=this._instances[e.id],this._selectControl(this._constants.TIME_CURRENT_TXT,this._player_id).html(this._formatTimestamp(null)),this._selectControl(this._constants.TIME_DURATION_TXT,this._player_id).html(this._formatTimestamp(null)),i.params.source=e.source,i.params.slate=e.slate?e.slate:"",i.params.endSlate=e.endSlate?e.endSlate:"",i.params.trackingID=e.trackingID?e.trackingID:e.id,i.playWhenReady=e.autoplay?!0:!1,i.hasSlate="undefined"!=typeof e.slate&&null!==e.slate||"undefined"!=typeof e.endSlate&&null!==e.endSlate?!0:!1,i.hasClickThru="undefined"!=typeof e.clickThru&&null!==e.clickThru&&e.clickThru.length>0||"undefined"!=typeof e.clickID&&null!==e.clickID&&e.clickID>0,this._instances[e.id].tracking[e.trackingID]&&i.tracking[e.trackingID][this._events.video.STARTED]&&(i.replaying[e.trackingID]=!0),i.seekedStopTracking=!1,i.started=!1,i.ready=!1,i.canPlay=!1,this.currentTime(e.id,.1,!0),i.video&&i.video.pause(),this._showPlayToggle(!0,this._player_id);var s=$("#"+this._class_prefix+this._constants.PLAY_BTN+"_"+this._uuid);s.addClass(this._constants.ICON_PLAY),s.removeClass(this._constants.ICON_PAUSE),undertone.creative.VideoPlayer.isIPadv1&&this._redrawControls(this._player_id,!1),""!=i.params.slate?(this._changeSlate(i.params.slate,e.id),this._showSlate(!0,e.id)):""!=i.params.endSlate&&this._changeSlate(i.params.endSlate,e.id),this.setSource()}},_checkAndSetVideoSources:function(e){var t="",i="",s=["source_mp4","source_webm","source"],n=!1,a=undertone.creative.VideoPlayer.getSupportedCodecs();if(i="source_"+this._primaryVideoCodecSupported(e.forceFlash,e),e[i]&&"string"==typeof e[i].toLowerCase()&&e[i].replace(/^\s|\s$/g,"").length>4&&(t=e[i].substr(-4).replace(".",""),this._useHTML5=a.html5.indexOf(t)>-1,e.source=e[i],n=!0),!n){s[s.indexOf(i)]=null;for(i in s)if(i=s[i],i&&e.hasOwnProperty(i)&&(e[i]=e[i].replace(/^\s|\s$/g,""),"string"==typeof e[i].toLowerCase()&&e[i].length>4&&(t=e[i].substr(-4).replace(".",""),a.all.indexOf(t)>-1))){this._useHTML5=a.html5.indexOf(t)>-1,n=!0;break}n&&(e.source=e[i])}return e.source?(e.source=this._relativeToAbsolutePath(e.source),!0):!1},init:function(e,t){if(!e.hasOwnProperty("id")&&"undefined"!=typeof t&&$(t).attr("id").length&&(e.id=$(t).attr("id").replace("#","")),e.hasOwnProperty("debug")&&(this._debug=!!e.debug),this._instances&&!this._instances[e.id]){this._ready=!1,this._swfLoaded=!1,Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){for(var i=t||0,s=this.length;s>i;i++)if(this[i]==e)return i;return-1});var i=null,s="",n=null,a=this;if(this._start_time=Date.now(),"object"!=(typeof e).toLowerCase()||"string"!=(typeof e.id).toLowerCase()||!e.id.length||!this._checkAndSetVideoSources(e))return!1;this.FLASH_FALLBACK_SWF=e.hasOwnProperty("swfLocation")?e.swfLocation:this._constants.FLASH_FALLBACK_SWF,undertone.creative.addEventListener("close",function(){a.pause(a._player_id)}),undertone.creative.addEventListener("redirect",function(){a.pause(a._player_id)}),"undefined"==typeof this._instances.length&&(this._instances.length=0),s=this._configure(e),this._uuid=this._getPlayerUUID(s),n=this._instances[s],i=this._selector(s),n.params.trackingID=e.hasOwnProperty("trackingID")?e.trackingID:s,e=n.params,1==e.displayHidden&&(n.hidden=!0,this.display(i,"none")),n.clickable=!0,n.initialLoad=!0,this._embedPlayer(e,n,i),this._addEvent($(window),"resize",$.proxy(this._resizedWindowEvent,this))}else this._reconfigInstance(e);return this._uuid},createVideo:function(e,t){this._useHTML5&&!t.forceFlash?this._createVideoTag():this._createFlashVideo(this,this._player_id)},_embedPlayer:function(e,t,i){var s=this._constants,n="",a=t.params.uuid;i.height("100%"),i.width("100%"),i.css("position","relative"),n='<div id="'+this._class_prefix+s.FRAME+"_"+a+'" '+s.DATA_ID+'="'+this._player_id+'" class="'+this._class_prefix+s.FRAME+'" style="height:100%px;width:100%;"></div>',this._addEvent($("#"+e.player_id).get(0),this._events.video.PLAYER_READY,$.proxy(this.playerReady,this)),i.append($(n)),this.createVideo(e,t),n='<div id="'+this._class_prefix+s.SLATE+"_"+a+'" '+s.DATA_ID+'="'+this._player_id+'" class="'+this._class_prefix+s.SLATE+'" style="',this._instances[this._player_id].params.slate&&(n+="background-image:url("+this._instances[this._player_id].params.slate+");"),n+='height:100%;width:100%"></div><div class="'+this._class_prefix+s.BUFFER_WRAPPER+'" id="'+this._class_prefix+s.BUFFER_WRAPPER+"_"+a+'" '+s.DATA_ID+'="'+this._player_id+'" style="display:none;"><div id="'+this._class_prefix+s.BUFFER_INDICATOR+"_"+a+'" '+s.DATA_ID+'="'+this._player_id+'" class="'+this._class_prefix+s.BUFFER_INDICATOR+' icon-connection" style="display:none"></div></div><div id="'+this._class_prefix+s.COVER+"_"+a+'" '+s.DATA_ID+'="'+this._player_id+'" class="'+this._class_prefix+s.COVER+'"></div>',t.params.playToggle&&(n+='<div class="'+this._class_prefix+s.PLAY_TOGGLE_WRAPPER+'" id="'+this._class_prefix+s.PLAY_TOGGLE_WRAPPER+"_"+a+'" '+s.DATA_ID+'="'+this._player_id+'" style="display:none;"><div id="'+this._class_prefix+s.PLAY_TOGGLE+"_"+a+'" '+s.DATA_ID+'="'+this._player_id+'" class="'+this._class_prefix+s.PLAY_TOGGLE+" "+s.ICON_PLAY_TOGGLE+'"></div><div class="'+this._class_prefix+s.PLAY_TOGGLE_WRAPPER+'_insert" id="'+this._class_prefix+s.PLAY_TOGGLE_WRAPPER+"_insert_"+a+'" '+s.DATA_ID+'="'+this._player_id+'"></div></div>'),n+='<div style="display: none;" '+s.DATA_ID+'="'+this._player_id+'" class="'+this._class_prefix+s.CONTROLS+' minimal" id="'+this._class_prefix+s.CONTROLS+"_"+a+'"><div '+s.DATA_ID+'="'+this._player_id+'" class="'+this._class_prefix+s.CONTROL_COVER+'" id="'+this._class_prefix+s.CONTROL_COVER+"_"+a+'"></div><div '+s.DATA_ID+'="'+this._player_id+'" class="'+this._class_prefix+s.BACKGROUND+'" id="'+this._class_prefix+s.BACKGROUND+"_"+a+'"></div><div '+s.DATA_ID+'="'+this._player_id+'" class="'+this._class_prefix+s.PLAY_BTN+" "+this._class_prefix+s.CONTROL_BAR_BTNS_CLASS+'" id="'+this._class_prefix+s.PLAY_BTN+"_"+a+'"></div><div '+s.DATA_ID+'="'+this._player_id+'" class="'+this._class_prefix+s.PROGRESS_BAR+'" id="'+this._class_prefix+s.PROGRESS_BAR+"_"+a+'"><div '+s.DATA_ID+'="'+this._player_id+'" class="'+this._class_prefix+s.PROGRESS_BACK+'" id="'+this._class_prefix+s.PROGRESS_BACK+"_"+a+'"></div><div '+s.DATA_ID+'="'+this._player_id+'" class="'+this._class_prefix+s.PROGRESS_DOWN+'" id="'+this._class_prefix+s.PROGRESS_DOWN+"_"+a+'"></div><div '+s.DATA_ID+'="'+this._player_id+'" class="'+this._class_prefix+s.PROGRESS_CURRENT+'" id="'+this._class_prefix+s.PROGRESS_CURRENT+"_"+a+'"></div><div '+s.DATA_ID+'="'+this._player_id+'" class="'+this._class_prefix+s.PROGRESS_CLICK+'" id="'+this._class_prefix+s.PROGRESS_CLICK+"_"+a+'"></div></div><div '+s.DATA_ID+'="'+this._player_id+'" class="'+this._class_prefix+s.TIME_CURRENT_TXT+" "+this._class_prefix+s.TEXT_DISPLAY_CLASS+'" id="'+this._class_prefix+s.TIME_CURRENT_TXT+"_"+a+'">00:00</div><div '+s.DATA_ID+'="'+this._player_id+'" class="'+this._class_prefix+s.TIME_DURATION_TXT+" "+this._class_prefix+s.TEXT_DISPLAY_CLASS+'" id="'+this._class_prefix+s.TIME_DURATION_TXT+"_"+a+'">00:00</div><div '+s.DATA_ID+'="'+this._player_id+'" class="'+this._class_prefix+s.VOL_BTN+" "+this._class_prefix+s.CONTROL_BAR_BTNS_CLASS+" "+s.ICON_VOL_HIGH+'" id="'+this._class_prefix+s.VOL_BTN+"_"+a+'"',undertone.creative.VideoPlayer.isMobile&&(n+='style="display:none"'),n+="></div><div "+s.DATA_ID+'="'+this._player_id+'" class="'+this._class_prefix+s.VOL_BAR+'" id="'+this._class_prefix+s.VOL_BAR+"_"+a+'"',undertone.creative.VideoPlayer.isMobile&&(n+='style="display:none"'),n+="><div "+s.DATA_ID+'="'+this._player_id+'" class="'+this._class_prefix+s.VOL_BACK+'" id="'+this._class_prefix+s.VOL_BACK+"_"+a+'"></div><div '+s.DATA_ID+'="'+this._player_id+'" class="'+this._class_prefix+s.VOL_HEAD+'" id="'+this._class_prefix+s.VOL_HEAD+"_"+a+'"></div><div '+s.DATA_ID+'="'+this._player_id+'" class="'+this._class_prefix+s.VOL_SLIDER+'" id="'+this._class_prefix+s.VOL_SLIDER+"_"+a+'"></div><div '+s.DATA_ID+'="'+this._player_id+'" class="'+this._class_prefix+s.VOL_CLICK+'" id="'+this._class_prefix+s.VOL_CLICK+"_"+a+'"></div></div>',n+="</div>",this._selector(this._class_prefix+s.FRAME+"_"+a).append(n),this._useHTML5&&!t.forceFlash&&(this._bindMediaEvents(t.video,this._player_id),this.setSource(),this._waitForControls(this._player_id,this._postInit,this)),this._instances[this._player_id].params.slate||this._showSlate(!1,this._player_id)},createVideoPlayer:function(e){e.video=this._useHTML5&&!e.forceFlash?new undertone.creative.VideoPlayer.HTML5VideoPlayer:new undertone.creative.VideoPlayer.FlashVideoPlayer},_configure:function(e){if(!e)return null;"string"!=typeof e.id&&(e.id=this.config.id),e.player_id="#"==e.id[0]?e.id.substr(1,e.id.length):e.id;var t=this._constants,i=e.player_id||this._player_id,s={playerInitialized:!1,redrawingControls:!1,params:{},aspectRatio:null,controls:{},timeupdate_interval:1,started:!1,controlsMininized:!1,mp4:e.source_mp4?e.source_mp4:null,webm:e.source_webm?e.source_webm:null,hasSlate:!1,hasClickThru:!1,disableSeeking:!1,forceFlash:!1,source:"",timeUpdateTimer:null,timeProgressTimer:null,timeBufferTimer:null,deviceVolumeCheck:!0,video:null,ready:!1,canPlay:!1,waiting:!1,playWhenReady:!1,previousBufferTime:0,previousTime:0,bufferPaused:!1,pauseOnBuffer:!0,hidden:!1,trackingID:null,tracking:{},replaying:{}},n={},a=null,r=null;return this._instances[i]=s,"undefined"==typeof this._instances.length?this._instances.length=1:this._instances.length++,s=this._instances[i],s.params={},e.clickID&&(e.clickID=0|e.clickID,e.clickThru=null),$.extend(s.params,this.config,e),s.params.volume=parseFloat(s.params.volume.toString()),s.params.volume>1&&(s.params.volume/=100),n=this._instances[i].params,this._instances[i].hasSlate="undefined"!=typeof n.slate&&null!==n.slate||"undefined"!=typeof n.endSlate&&null!==n.endSlate?!0:!1,this._instances[i].hasClickThru="undefined"!=typeof n.clickThru&&null!==n.clickThru&&n.clickThru.length>0||"undefined"!=typeof n.clickID&&null!==n.clickID&&n.clickID>0,this._instances[i].forceFlash=n.forceFlash,this._instances[i].pauseOnClickThru=n.pauseOnClickThru,this._instances[i].disableSeeking=n.disableSeeking,this._instances[i].muted=n.muted,this._instances[i].isMuted=this._instances[i].muted,this._instances[i].pauseOnBuffer=n.pauseOnBuffer,this._instances[i].playWhenReady=n.autoplay,"undefined"!=typeof n.aspectRatio&&(a=n.aspectRatio.split(":"),a.length>1&&!isNaN(a[0])&&!isNaN(a[1])&&(this._instances[i].aspectRatio=a[1]/a[0])),this.createVideoPlayer(this._instances[i]),this._instances.length&&this.setPlayer(i),r=this._selector(i),r.attr(t.DATA_CLASS,this._class_prefix+this._getPlayerUUID(i)),i},_setVideoTracking:function(e,t){if(e||(e=this._player_id),null===this._player_id||this._instances=={}||"undefined"==typeof this._instances[this._player_id])return null;var i=this._events.video,s=this._instances[e],n=[i.STARTED,"firstQuartile","midpoint","thirdQuartile","complete",i.PAUSED,i.RESUMED,i.SEEKED,i.VIDEO_REPLAY,i.REWIND,i.PLAYING,i.LOADED,i.ENDED,"mute","unmute"],a=s.params.trackingID;s.tracking||(s.tracking={}),s.replaying[a]=!1,s.tracking[a]={};for(var r=0,o=n.length;o>r;r++)s.tracking[a][n[r]]=!1;return 1==t&&-1!=s.tracking[a].hasOwnProperty(i.LOADED)&&(s.tracking[a][i.LOADED]=!0),!0},_trackEvent:function(e,t){if(null==t||"undefined"==typeof this._instances[t])return null;var i=this._instances[t].params.trackingID,s=this._instances[t].tracking[i];s&&s.hasOwnProperty(e)&&(this._instances[t].tracking[i][e]||("mute"!=e&&"unmute"!=e&&(this._instances[t].tracking[i][e]=!0),this._selector(t).trigger(e,[{player_id:t,type:e}]))),"ended"!=e&&this._events.undertone_tracking.indexOf(e)>-1&&(undertone.creative.trackEvent(this._constants.VIDEO_EVENT_PREFIX+e,i,!0),this._instances[t].params.testing&&this._verifyTrackEvent(this._constants.VIDEO_EVENT_PREFIX+e,i,!0))},_verifyTrackEvent:function(){},_getPlayerUUID:function(e){return"string"!=typeof e?"":(this._instances[e].params.uuid||(this._instances[e].params.uuid=this._createUUID(10)),this._instances[e].params.uuid)},_log:function(e){this._debug&&console&&console.log&&this._instances[this._player_id].params.testing&&this.log(e)},log:function(){},_primaryVideoCodecSupported:function(e){1==arguments?e=!!e:this._instances[this._player_id]&&(e=this._instances[this._player_id].forceFlash);var t=null,i=undertone.creative.VideoPlayer.getSupportedCodecs();return i.all.length<1?null:(i.html5.length&&!e?i.html5.indexOf("mp4")>-1?t="mp4":i.html5.indexOf("webm")>-1&&(t="webm"):i.flash.indexOf("mp4")>-1&&(t="mp4"),t)},_millisecondsToTime:function(e){if(isNaN(e))return"";var t=e%1e3,i=Math.floor(e/1e3%60).toString(),s=Math.floor(e/6e4%60).toString();t=t.toString();for(var n=1;5>n;n++)n>t.length&&(t="0"+t);return(s.toString().length<2?0+s.toString():s)+":"+(i.toString().length<2?0+i.toString():i)+"."+t},playerReady:function(){if(this._removeEvent($("#"+this._player_id).get(0),this._events.video.PLAYER_READY,$.proxy(this.playerReady,this)),this._swfLoaded=!0,null===this._player_id||this._instances=={}||"undefined"==typeof this._instances[this._player_id])return null;var e=this._instances[this._player_id],t=this._selectControl(this._constants.VIDEO,this._player_id);return e.video?(e.video.init(t.get(0),this._useHTML5&&!e.forceFlash),this._bindMediaEvents(e.video,this._player_id),e.canPlay=!0,this._waitForControls(this._player_id,this._postInit,this),!0):void 0},_embedSWF:function(e,t,i,s,n,a,r){var o=null,l=null;return this._instances!={}&&"undefined"!=typeof this._instances[this._player_id]&&e&&t&&i&&s&&n&&a&&r?(n=n.length>0&&n.join?n.join("&"):"",e+="?r="+Math.floor(9999999*Math.random()),e=this._relativeToAbsolutePath(e),$("#"+this._player_id).height()||$("#"+this._player_id).height("100%"),$("#"+this._player_id).width()||$("#"+this._player_id).width("100%"),t.height()||t.height("100%"),t.parent().height()||t.parent().height("100%"),t.width()||t.width("100%"),t.parent().width()||t.parent().width("100%"),a.FlashVars=n,a.quality="high",a.allowFullScreen="true",a.play="true",a.loop="true",a.scale="showall",a.salign="tl",a.name=r.id,a.id=r.id,a[this._constants.DATA_ID]=this._player_id,o=document.getElementById(r.id),!o&&swfobject?(t.append($('<div id="'+r.id+'" style="height:100%;width:100%"></div>')),swfobject.embedSWF(e,r.id,"100%","100%","9.0.124","http://images.undertone.com/swf/install.swf",n,a,a),swfobject.createCSS(r.id,"outline:none;"),l=this._selectControl(this._constants.VIDEO,this._player_id),l.attr(this._constants.DATA_ID,this._player_id),l.addClass(this._class_prefix+this._constants.SWF),!0):!1):null},_createFlashVideo:function(e,t){var i={scale:"showAll",wmode:"opaque",allowscriptaccess:"always",bgcolor:"#000000"},s={id:e._getControlDivId(e._constants.VIDEO,e._player_id)},n=e._instances[t],a="100%",r="100%",o=["bannerid="+t,"onLoadCallback=playerReady"];return null!==n.params.width&&(a=n.params.width),null!==n.params.height&&(r=n.params.height),s[e._constants.DATA_ID]=t,s["class"]=e._class_prefix+e._constants.VIDEO,this._events.HTML5.PAUSE="pausing",e._embedSWF(e._constants.FLASH_FALLBACK_SWF,e._selectControl(e._constants.FRAME,t),"100%","100%",o,i,s),null!==a&&null!==r&&e.dimensions(a,r),!0},_fadeBuffer:function(){if(null===this._player_id||this._instances=={}||"undefined"==typeof this._instances[this._player_id])return null;var e=this._selectControl(this._constants.BUFFER_INDICATOR,this._player_id),t=this,i=this._instances[this._player_id];return i.timeBufferTimer=!0,i.params.showBuffering?setTimeout(function(){e=e||t._selectControl(t._constants.BUFFER_INDICATOR,t._player_id);var i,s;e&&(undertone.creative.VideoPlayer.isIE?(i={"-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=70)",display:"block"},s={"-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",display:"none"}):(i={opacity:"0.7",display:"block"},s={opacity:"0.0",display:"none"}),e.css(i),e.animate(s,1200,null,function(){setTimeout(function(){e||t._selectControl(t._constants.BUFFER_INDICATOR,t._player_id),e&&e.animate(i,1200,null,function(){})},1e3)}))},1e3):e&&(undertone.creative.VideoPlayer.isIE?e.css({"-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",display:"none"}):e.css({opacity:"0.0",display:"none"})),!0},_resetTimeBufferTimer:function(e){this._instances[e].timeBufferTimer=!1},_changeSlate:function(e,t){if(t||(t=this._player_id),!this._instances||!this._instances[t]||"string"!=typeof e||e.length<4)return null;this._instances[t].hasSlate=!0;var i=this._class_prefix+this._constants.SLATE+"_"+this._instances[t].params.uuid,s=this._selector(i);return s.css("background-image","url('"+e+"')"),!0},_showSlate:function(e,t){var i=this._selectControl(this._constants.SLATE,t);return e=!!e&&this._instances[this._player_id].params.showSlates,i?e?(i.show(),!0):(i.hide(),!1):(this._showPlayToggle(e,t),!1)},_showPlayToggle:function(e,t){if(t||(t=this._player_id),!t||!this._instances[t])return null;e=!!e&&!this._instances[t].params.hideControls;var i=1==this._instances[t].params.playToggle?this._selectControl(this._constants.PLAY_TOGGLE_WRAPPER,t):null;return i&&!this._instances[t].playWhenReady?1==e?(i.css("display","inline-block"),!0):(i.css("display","none"),!1):null},_createUUID:function(e){for(var t,i=[],s="0123456789abcdef",n=0;36>n;n++)i[n]=s.substr(Math.floor(16*Math.random()),1);return i[14]="4",i[19]=s.substr(3&i[19]|8,1),i[8]=i[13]=i[18]=i[23]="-",t=i.join(""),e&&!isNaN(e)&&(0>e?e=0:e>t.replace(/\-/gi,"").length&&(e=t.replace(/\-/gi,"").length),t=t.replace(/\-/gi,"").substr(0,e)),t},_formatTimestamp:function(e){if(null===e||"undefined"==typeof e)return this._constants.NULL_TIME;isNaN(e)&&(e=0),e=Math.floor(e);var t=0,i=0,s=0;e>=3600&&(t=Math.floor(e/3600),e=Math.floor(e-3600*t)),e>=60?(i=Math.floor(e/60),s=Math.floor(e-60*i)):isNaN(e)||(s=e),t=2!=i.toString().length?"0"+t:t,i=2!=i.toString().length?"0"+i:i,s=2!=s.toString().length?"0"+s:s;var n="00"!=t?t+":":"";return n+=i+":"+s},_addEvent:function(e,t,i){return this._instances[this._player_id]?($(e).on(t,i),!0):null},_removeEvent:function(e,t,i){return this._instances[this._player_id]?($(e).off(t,i),!0):null},_createVideoTag:function(){if(null===this._player_id||this._instances=={}||"undefined"==typeof this._instances[this._player_id])return null;var e=this._constants,t=this._selectControl(e.VIDEO,this._player_id),i=0,s=0,n=null;return t||(t=$("<video></video"),t.attr("id",this._getControlDivId(e.VIDEO,this._player_id)),t.attr(e.DATA_ID,this._player_id),i=this._instances[this._player_id].params.width,s=this._instances[this._player_id].params.height,this._instances[this._player_id].params.html5Controls&&t.attr("controls",this._player_id),t.attr("class",this._class_prefix+e.VIDEO),""!==this._instances[this._player_id].params.preload&&t.attr("preload",this._instances[this._player_id].params.preload),n=this._instances[this._player_id],n.video.init(t.get(0),this._useHTML5&&!n.forceFlash),this._selectControl(e.FRAME,this._player_id).append($(t)),null!==i&&null!==s&&this.dimensions(i,s)),!0},setSource:function(e,t){if(e&&(this._player_id=e),"object"==typeof t)return this._reconfigInstance(t);var i,s,n=this._instances[this._player_id];n.tracking!={}&&n.tracking[n.params.trackingID]||this._setVideoTracking(this._player_id),i=this._selectControl(this._constants.VIDEO,this._player_id),i&&(s=i.prop("tagName").toLowerCase(),"video"==s?($(i).attr("src",n.params.source),i&&$(i).get(0).load()):"embed"==s||"object"==s?$(i).get(0).loadVideo(n.params.source):n.video.load(n.params.source_youtube))},_checkQuartiles:function(e,t,i){if(!i||!e)return null;var s=(this._events.video,this._constants,i.paused()),n=i.duration(),a=e.params.trackingID,r=t/n*100|0;return 1==s||e.seekedStopTracking||e.replaying[a]||(r>=25&&1!=e.tracking[a].firstQuartile?(e.tracking[a].firstQuartile=!0,this._trackEvent("firstQuartile",this._player_id)):r>=50&&1!=e.tracking[a].midpoint?(e.tracking[a].midpoint=!0,this._trackEvent("midpoint",this._player_id)):r>=75&&1!=e.tracking[a].thirdQuartile&&(e.tracking[a].thirdQuartile=!0,this._trackEvent("thirdQuartile",this._player_id))),!0},_videoLoadedMetadata:function(){if(null===this._player_id||this._instances=={}||"undefined"==typeof this._instances[this._player_id])return null;var e=this._getVideo(this._player_id),t=this._selector(this._player_id),i=t.width(),s=t.height();return null!==e&&e.setSize(i,s),this._trackEvent(this._events.video.LOADED_METADATA,this._player_id),this._instances[this._player_id].playWhenReady&&e&&e.play(),!0},_videoLoadedData:function(){return null===this._player_id||this._instances=={}||"undefined"==typeof this._instances[this._player_id]?null:(this._startProgressTimer(this._player_id),this._trackEvent(this._events.video.LOADED,this._player_id),!0)},_resizedWindowEvent:function(){this._resizedEventThrottle(this)},_resizedEventThrottle:function(e){if("object"!=typeof e||e._instances=={}||"undefined"==typeof e._instances[e._player_id])return null;var t;for(var i in e._instances)"length"!=i&&1==e._instances[e._player_id].playerInitialized&&(e._adjustAspectRatio(e._player_id),e._adjustResizables(!0,e._player_id),e._instances[e._player_id].params.hideControls||(t=e._getVideo(e._player_id),t&&e._updateProgressBarDown(t)))},_adjustResizables:function(e,t){if(t||(t=this._player_id),null===t||this._instances=={}||"undefined"==typeof this._instances[t])return null;var i,s,n,a,r;if(e)i=this._selector(t),i&&(s=i.width(),a=i.height(),r=this._getVideo(t),null!==r&&r.setSize(s,a));else for(var o in this._instances)"length"!=o&&(n=this._selectControl(this._constants.PLAY_TOGGLE_WRAPPER,o.player_id),i=this._selector(o.player_id),r=this._getVideo(o.player_id),s=i.width(),a=i.height(),r.setSize(s,a),n&&n.css("display","none"));return!0},_continuousPlay:function(e){e||(e=this._player_id);var t,i=this._instances[e];return!i||i&&1==i.hidden?!1:(t=this._getVideo(e),i.playWhenReady&&!i.canPlay&&t?(this._instances[e].playWhenReady=!1,t.play(),!0):!1)},_videoVolumeChanged:function(){return null===this._player_id||this._instances=={}||"undefined"==typeof this._instances[this._player_id]?null:(this._updateVolumeBar(this._getVideo(this._player_id)),!0)},_updatePlayIcon:function(){var e=this._selectControl(this._constants.PLAY_BTN,this._player_id);e.hasClass(this._constants.ICON_PLAY)&&e.removeClass(this._constants.ICON_PLAY),0==e.hasClass(this._constants.ICON_PAUSE)&&e.addClass(this._constants.ICON_PAUSE),undertone.creative.VideoPlayer.isIPadv1&&this._redrawControls(this._player_id,!1)},_videoPlaying:function(){return null===this._player_id||this._instances=={}||"undefined"==typeof this._instances[this._player_id]?!1:(this._showPlayToggle(!1,this._player_id),this._updatePlayIcon(),!0)},_bindMediaEvents:function(e,t){if("undefined"==typeof e||null===this._player_id||this._instances=={}||"undefined"==typeof this._instances[this._player_id])return null;var i,s=this._events.HTML5,n=this;return i=e._html5?e.ele:this._selector(t).get(0),this._addEvent(i,s.LOADED_METADATA,$.proxy(this._videoLoadedMetadata,this)),this._addEvent(i,s.LOADED_DATA,$.proxy(this._videoLoadedData,this)),this._addEvent(i,s.DURATION_CHANGE,$.proxy(this._durationChange,this)),this._addEvent(i,s.PLAYING,$.proxy(this._videoPlaying,this)),this._debug&&this._addEvent(i,s.ERROR,function(e){switch(e.target.error.code){case e.target.error.MEDIA_ERR_ABORTED:n._log("You aborted the video playback.");break;case e.target.error.MEDIA_ERR_NETWORK:n._log("A network error caused the video download to fail part-way.");break;case e.target.error.MEDIA_ERR_DECODE:n._log("The video playback was aborted due to a corruption problem or because the video used features your browser did not support.");break;case e.target.error.MEDIA_ERR_SRC_NOT_SUPPORTED:n._log("The video could not be loaded, either because the server or network failed or because the format is not supported.");break;default:n._log("An unknown error occurred.")}}),this._addEvent(i,s.PAUSE,$.proxy(this._videoPaused,this)),this._addEvent(i,s.PLAY,$.proxy(this._videoPlay,this)),this._addEvent(i,s.VOL_CHANGE,$.proxy(this._videoVolumeChanged,this)),this._addEvent(i,s.SEEKED,$.proxy(this._videoSeeked,this)),this._addEvent(i,s.LOAD_START,$.proxy(this._videoLoadStart,this)),this._addEvent(i,s.ENDED,function(){var e=n._getVideo(t),i=n._instances[n._player_id],s=n._events.video,a=n._selectControl(n._constants.PLAY_BTN,n._player_id),r=i.params.trackingID;n._stopPlayTimer(n._player_id),i.tracking[r][s.ENDED]||n._trackEvent(s.ENDED,n._player_id),n._updatePlayTimer(n._player_id,!1,e),n._selectControl(n._constants.TIME_CURRENT_TXT,n._player_id).html(n._constants.NULL_TIME),i.started=!1,e.paused()||e.pause(),""!=i.params.endSlate?(n._changeSlate(i.params.endSlate,n._player_id),n._showSlate(!0,n._player_id)):""!=i.params.slate&&(n._changeSlate(i.params.slate,n._player_id),n._showSlate(!0,n._player_id)),a.addClass(n._constants.ICON_REPLAY),a.hasClass(n._constants.ICON_PLAY)&&a.removeClass(n._constants.ICON_PLAY),a.hasClass(n._constants.ICON_PAUSE)&&a.removeClass(n._constants.ICON_PAUSE),undertone.creative.VideoPlayer.isIPadv1&&this._redrawControls(n._player_id,!1),1!=i.tracking[r].thirdQuartile||e.seekedStopTracking||i.replaying[r]||1==i.tracking[r].complete||(i.tracking[r].complete=!0,n._trackEvent("complete",n._player_id)),i.replaying[r]=!0,n._showPlayToggle(!0,n._player_id)}),e.ele},_durationChange:function(e,t){if(this._instances=={}||"undefined"==typeof this._instances[this._player_id])return null;var i=e.data&&e.data.duration?e.data.duration:t&&t.data&&t.data.duration?t.data.duration:null,s=0,n=null,a=null;null===i&&(a=this._getVideo(this._player_id),i=a?a.duration():0),this._instances[this._player_id].params.duration=s,s=this._selectControl(this._constants.TIME_DURATION_TXT,this._player_id),s.html(this._formatTimestamp(0|i)),n=this._selectControl(this._constants.TIME_CURRENT_TXT,this._player_id),n.text()==this._constants.NULL_TIME&&n.html(this._formatTimestamp(0))},_videoLoadStart:function(){if(this._instances=={}||!this._instances[this._player_id])return null;var e=this._instances[this._player_id],t=this._getVideo(this._player_id);return t?(1!=e.ready&&(e.ready=!0),!e.params.hideControls&&t.currentTime&&t.currentTime()>0&&t.currentTime(.1),this._resetControls(this._player_id),$("#"+self._player_id).trigger("videoLoadStart"),!0):($("#"+self._player_id).trigger("videoLoadStart"),void 0)},_resetControls:function(e){var t=this._constants,i=this._selectControl(t.PLAY_BTN,e);this._selectControl(t.TIME_CURRENT_TXT,e).html(this._formatTimestamp(0)),this._selectControl(t.TIME_DURATION_TXT,e).html(this._formatTimestamp(0)),this._selectControl(t.PROGRESS_CURRENT,e).width("0%"),this._selectControl(t.PROGRESS_DOWN,e).width("0%"),i.hasClass(t.ICON_REPLAY)&&i.removeClass(t.ICON_REPLAY),i.addClass(t.ICON_PLAY)},_videoSeeked:function(){return null===this._player_id||this._instances=={}||"undefined"==typeof this._instances[this._player_id]?null:(this._updatePlayTimer(this._player_id,!1,this._getVideo(this._player_id)),!0)},_videoPaused:function(){if(null===this._player_id||this._instances=={}||"undefined"==typeof this._instances[this._player_id]||"undefined"==typeof this._instances[this._player_id].tracking)return null;if(1==this._instances[this._player_id].bufferPaused)return null;this._stopPlayTimer(),this._instances[this._player_id].started&&undertone.creative.VideoPlayer.isAndroid&&(this._instances[this._player_id].params.androidNotPausedCheck=0,this._startPlayTimer(this._player_id,!0)),this._stopProgressTimer(this._player_id);var e=this._selectControl(this._constants.PLAY_BTN,this._player_id),t=(this._constants,this._getVideo(this._player_id)),i=this,s=i._instances[i._player_id].params.trackingID,n=this._instances[this._player_id];return this._updatePlayTimer(this._player_id,!1,t),t&&!t.ended()&&(e.removeClass(this._constants.ICON_PAUSE),e.addClass(this._constants.ICON_PLAY),undertone.creative.VideoPlayer.isIPadv1&&this._redrawControls(this._player_id,!1)),n.tracking[s]&&!n.tracking[s][this._events.video.ENDED]&&setTimeout(function(){if(i&&i._player_id&&i._instances[i._player_id]){var e=i._instances[i._player_id].params.trackingID;
"undefined"!=typeof i._instances[i._player_id]&&"undefined"!=i._instances[i._player_id].tracking[e]&&(i._instances[i._player_id].tracking[e][i._events.video.ENDED]||i._trackEvent(i._events.video.PAUSED,i._player_id))}},25),1==undertone.creative.VideoPlayer.isIPhone||n.params.hideControls||this._showPlayToggle(!0,this._player_id),!0},_startPlayTimer:function(e,t){if(t=!!t,e||(e=this._player_id),null===e||this._instances=={}||"undefined"==typeof this._instances[e])return null;var i=this,s=this._selectControl(this._constants.PLAY_BTN,this._player_id),n=null;return this._instances[e].timeUpdateTimer&&(this._stopPlayTimer(e),this._instances[e].timeUpdateTimer=null),this._instances[e].timeUpdateTimer||(n=this._getVideo(e),t||(s.addClass(this._constants.ICON_PAUSE),s.removeClass(this._constants.ICON_PLAY),this._showPlayToggle(!1,this._player_id),undertone.creative.VideoPlayer.isIPadv1&&this._redrawControls(this._player_id,!1)),this._instances[e].timeUpdateTimer=setInterval(function(){i._updatePlayTimer(e,!0,n)},t?this._constants.THROTTLE_TIME_UPDATE_PAUSED:this._constants.THROTTLE_TIME_UPDATE)),!0},_updatePlayTimer:function(e,t,i){if(!(e&&i&&this._instances!={}&&this._instances[e]&&this._instances[e].ready))return null;i.error()>0&&this._stopPlayTimer(),t=!!t;var s,n=this._instances[e],a=i.ended()?i.duration():i.currentTime(),r=i.duration(),o=this._selectControl(this._constants.BUFFER_WRAPPER,e),l=0,d=0,_=n.params.trackingID,u=-1;a=null==a&&"undefined"!=typeof a?null:a.toFixed(4);try{d=i.readyState(),l=i.buffered().end(0).toFixed(4)}catch(h){}if(1>l||1>=r||d>0&&d>=this._events.readyState.HAVE_FUTURE_DATA&&i.currentTime().toFixed(4)<l&&n.previousTime<i.currentTime().toFixed(4)?o&&o.css("display","none"):d>0&&r>l&&n.params.showBuffering&&o&&"none"===o.css("display")&&(o.css("display","block"),this._fadeBuffer()),n.previousBufferTime=l,null!=a&&a!=n.previousTime){var r=i.duration();r=null==r&&"undefined"!=typeof r?null:r.toFixed(4),undertone.creative.VideoPlayer.isAndroid&&i.paused()&&a!=r&&!n.tracking[_][this._events.video.ENDED]&&(n.params.androidNotPausedCheck>1?(n.params.androidNotPausedCheck=0,i.play(),this._showPlayToggle(!1,this._player_id),this._updatePlayIcon()):n.params.androidNotPausedCheck++),n.previousTime=a,a>0&&0==n.started&&(n.started=!0,n.lastCurrentTime=a,n.replaying[_]?(n.tracking[_][this._events.video.ENDED]=!1,this._trackEvent(this._events.video.VIDEO_REPLAY,this._player_id)):(this._setVideoTracking(this._player_id,!0,_),this._trackEvent(this._events.video.STARTED,this._player_id)))}n.params.hideControls||(this._updateProgressBarCurrent(a,r,e),i.paused()||"00:00"==this._formatTimestamp(a)||this._selectControl(this._constants.TIME_CURRENT_TXT,e).html(this._formatTimestamp(a)),r>0&&this._selectControl(this._constants.TIME_DURATION_TXT,e).html(this._formatTimestamp(r))),(n.params.useManualSeekDetection||undertone.creative.VideoPlayer.isIPhone)&&(u=Date.now(),s=-1,isNaN(n.lastCurrentTime)||!n.params.useManualSeekDetection&&n.video.paused()||(s=a-n.lastCurrentTime,s>0&&s>=(u+n.params.manualSeekTimeBuffer-n.lastTime)/1e3&&s!=a?(n.seekedStopTracking=!0,this._trackEvent(this._events.video.SEEKED,e)):0>s&&(!undertone.creative.VideoPlayer.isIPhone&&!n.tracking[n.params.trackingID][this._events.video.ENDED]||s!=-1*n.lastCurrentTime)&&-1*s>n.params.manualSeekTimeBuffer/1e3&&(n.seekedStopTracking=!0,this._trackEvent(this._events.video.VIDEO_REPLAY,e))),n.lastCurrentTime=a,s>0&&(n.lastTime=u)),1!=t||n.seekedStopTracking||n.replaying[n.params.trackingID]||i.paused()||this._checkQuartiles(n,a,i)},_stopPlayTimer:function(e){return e||(e=this._player_id),e&&this._instances!={}&&"undefined"!=typeof this._instances[e]?(null!==this._instances[e].timeUpdateTimer&&(clearInterval(this._instances[e].timeUpdateTimer),this._instances[e].timeUpdateTimer=null),!0):null},_startProgressTimer:function(e){if(!this._instances[e].params.hideControls){if(e||(e=this._player_id),!e||this._instances=={}||"undefined"==typeof this._instances[e])return null;var t=this,i=this._getVideo(e);null===this._instances[e].timeProgressTimer&&(this._instances[e].timeProgressTimer=setInterval(function(){t._updateProgressTimer(i)},this._constants.THROTTLE_PROGRESS_UPDATE))}return!0},_updateProgressTimer:function(e){return e&&this._instances!={}&&"undefined"!=typeof this._instances[this._player_id]?(this._updateProgressBarDown(e),this._checkBuffering(e),!0):null},_stopProgressTimer:function(e){return e&&this._instances!={}&&"undefined"!=typeof this._instances[e]?(null!==this._instances[e].timeProgressTimer&&(clearInterval(this._instances[e].timeProgressTimer),this._instances[e].timeProgressTimer=null),!0):null},_checkBuffering:function(e){if(!e||this._instances=={}||"undefined"==typeof this._instances[this._player_id])return null;var t=0,i=null,s=!1;try{t=e.buffered().end(0).toFixed(4)}catch(n){}return i=this._selectControl(this._constants.BUFFER_WRAPPER,this._player_id),t>0&&t-e.currentTime()<=2&&Math.floor(t)<Math.floor(e.duration())&&e.duration()>1?(i&&"none"===i.css("display")&&i.css("display","block"),this._fadeBuffer(),this._instances[this._player_id].pauseOnBuffer&&!e.paused()&&(this._instances[this._player_id].bufferPaused=!0,this._instances[this._player_id].playWhenReady=!0,e.pause())):(e.currentTime()<1&&(s=this._continuousPlay()),this._instances[this._player_id].bufferPaused&&(this._instances[this._player_id].bufferPaused=!1,i&&i.css("display","none"),this._instances[this._player_id].pauseOnBuffer&&!s&&e.play())),!0},_videoPlay:function(){if(this._instances=={}||"undefined"==typeof this._instances[this._player_id])return null;var e=this._instances[this._player_id],t=this._getVideo(this._player_id),i=(e.params.trackingID,this._constants),s=this._selectControl(i.PLAY_BTN,this._player_id),n=this._selectControl(i.SLATE,this._player_id),a=0;if(0==e.initialLoad)return e.initialLoad=!0,null;if(1==e.bufferPaused&&(this._checkBuffering(e.video),1==e.bufferPaused))return null;e.playWhenReady=!1,this._stopPlayTimer(this._player_id),this._startPlayTimer(this._player_id),this._startProgressTimer(this._player_id),(e.params.useManualSeekDetection||undertone.creative.VideoPlayer.isIPhone)&&(e.lastTime=Date.now()),e.started&&this._trackEvent(this._events.video.RESUMED,this._player_id),this._trackEvent(this._events.video.PLAYING,this._player_id),s.hasClass(i.ICON_PLAY)&&s.removeClass(i.ICON_PLAY),s.hasClass(i.ICON_REPLAY)&&s.removeClass(i.ICON_REPLAY),s.addClass(i.ICON_PAUSE),undertone.creative.VideoPlayer.isIPadv1&&this._redrawControls(this._player_id,!1),this._showPlayToggle(!1,this._player_id),n&&n.hide();try{a=t.buffered().end(0).toFixed(4)}catch(r){a=0}return!undertone.creative.VideoPlayer.isIE&&a>0&&a-t.currentTime()<=2&&t.duration()-t.currentTime()>=5&&Math.floor(a)<Math.floor(t.duration())?(e.pauseOnBuffer&&(e.playWhenReady=!0,e.bufferPaused=!0,t.pause()),this._updatePlayTimer(this._player_id,!1,t),void 0):(e.bufferPaused=!1,!0)},_waitForControls:function(e,t,i){if("function"!=typeof t||"object"!=typeof i||i._instances[i._player_id].params.hideControls)return null;var s=0,n=setInterval(function(){return++s>100?(clearInterval(n),!1):(1==i._controlsLoaded(e,i)&&(clearInterval(n),i._videoVolumeChanged(),t(e,i)),void 0)},50)},_controlsLoaded:function(e,t){if(!t||!t._instances||!t._instances[e])return null;var i=!0;return t._instances[e].hasSlate&&"none"==t._selectControl(t._constants.SLATE,e).css("background-image")&&(i=!1),i},_selector:function(e,t){t=!!t;var i=null,s=t&&this._instances&&this._instances[this._player_id]&&this._instances[this._player_id].params.doCache;return s&&this._cache[e]?i=this._cache[e]:i||(i=$("#"+e),0==i.length?i=null:s&&(this._cache[e]=i)),i},_selectControl:function(e,t){return this._instances[t]&&this._instances[t].params&&this._instances[t].params.uuid?this._selector(this._class_prefix+e+"_"+this._instances[t].params.uuid,e!=this._constants.VIDEO):null},_getControlDivId:function(e,t){return"undefined"==typeof this._instances[t]||"undefined"==typeof this._instances[t].params||"undefined"==typeof this._instances[t].params.uuid?null:this._class_prefix+e+"_"+this._instances[t].params.uuid},_updateProgressBarCurrent:function(e,t,i){if(("undefined"==typeof i||null===i)&&(i=this._player_id),!e||!t||null===this._player_id||this._instances=={}||"undefined"==typeof this._instances[this._player_id])return null;var s=this._constants,n=Math.round(e/t*100);return n>100?n=100:0>n&&(n=0),this._selectControl(s.PROGRESS_CURRENT,i).width(n+"%"),!0},_updateProgressBarDown:function(e){if(!e||"undefined"==typeof e.buffered||null===this._player_id||this._instances=={}||"undefined"==typeof this._instances[this._player_id])return null;var t,i=this._constants,s=e.ele.getAttribute(i.DATA_ID),n=0,a=this._selectControl(i.PROGRESS_DOWN,s);if(!a)return null;try{t=e.buffered().end(0)}catch(r){}return n=Math.round(t/e.duration()*100),t>=e.duration()&&this._stopProgressTimer(this._player_id),n>100?n=100:0>n&&(n=0),isNaN(n)?!0:(a.width(n+"%"),!0)},dimensions:function(e,t){if(!this._player_id||!this._instances||this._instances=={})return{width:null,height:null};var i,s;if("undefined"!=typeof e||"undefined"!=typeof t){if(this._player_id){if(s=this._selectControl(this._constants.VIDEO,this._player_id),!s)return{width:null,height:null};isNaN(e)||(this._instances[this._player_id].params.width=e,s.width(e)),isNaN(t)||(this._instances[this._player_id].params.height=t,s.height(t))}return{width:e,height:t}}return this._player_id?(i=this._selector(this._player_id),i?null!=e&&null!=t?{width:i.width(),height:i.height()}:null!=e?e:null!=t?t:{width:null,height:null}:null):void 0},_getVideo:function(e){if(e||(e=this._player_id),"undefined"==typeof e||null===e||"undefined"==typeof this._instances[e]||null==this._instances[e])return null;var t=this._instances[e].video;return t&&t.hasElement()?t:null},setPlayer:function(e){if(e){if(e=e.replace("#",""),!e||e.length<1)return null;if(this._instances[e])return this._player_id=e,this._uuid=this._instances[e].params.uuid,this._player_id}return null},_redrawControls:function(e,t){if(!this._instances[e].params.hideControls){t=!!t&&!undertone.creative.VideoPlayer.isTouch,this._instances[e].redrawingControls=!0;var i=this._constants,s=this._selectControl(i.CONTROLS,e),n=this._selectControl(i.PLAY_BTN,e),a=this._selectControl(i.VOL_BTN,e),r=null;return this._instances[e].playerInitialized&&s.show(),t?undertone.creative.VideoPlayer.isTouch&&this._instances[e].playerInitialized||(s.removeClass("full"),s.addClass("minimal"),r=this._getVideo(e),r&&1==r.ended()&&this._updatePlayTimer(this._player_id,!1,r)):(s.removeClass("minimal"),s.addClass("full"),n.css({opacity:"1.0","-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)"}),a.css({opacity:"1.0","-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)"})),this._updateProgressBarDown(this._getVideo(e)),this._updateVolumeBar(this._selectControl(i.VIDEO,e)),this._instances[e].redrawingControls=!1,this._instances[e].controlsMininized=t,t}},_updateVolumeBar:function(e){if(!e)return null;"undefined"==typeof e.attr&&(e=$(e));var t,i=this._constants,s=e.attr(i.DATA_ID),n=null,a=null,r=-1==this._volume;return s?(n=this._selectControl(i.VOL_BAR,s),a=this._selectControl(i.VOL_SLIDER,s),(e=this._getVideo(s))?e&&"undefined"!=typeof e.volume&&this._volume==e.volume()&&this._instances[s].isMuted==e.muted()?!0:(t=this._selectControl(i.VOL_BTN,s),e.volume()>0&&(this._unmutedVolume=e.volume()),this._volume=e.volume(),1==e.muted()?(t.removeClass(i.ICON_VOL_HIGH),t.addClass(i.ICON_VOL_MUTE),this._instances[s].isMuted!=e.muted()&&this._instances[s].started&&this._trackEvent(this._events.video.MUTED,s),a.width(0)):(t.removeClass(i.ICON_VOL_MUTE),t.addClass(i.ICON_VOL_HIGH),this._instances[s].isMuted!=e.muted()&&this._instances[s].started&&this._trackEvent(this._events.video.UNMUTED,s),0==e.volume()&&e.volume(this._unmutedVolume),a.width(parseInt(100*e.volume(),10)+"%")),this._instances[s].isMuted=e.muted(),r||this._trackEvent(this._events.video.VOL_CHANGED,s),!0):null):null},_removeWhitespace:function(e){return e&&e.length?e.replace(/\s/g,""):""},_adjustAspectRatio:function(e){if(e||(e=this._player_id),null===e||!this._instances[e])return null;if(!this._instances[e].params.width&&!this._instances[e].params.height&&"number"==typeof this._instances[e].aspectRatio){var t,i,s=this._selector(e),n=s.parent(),a=this._selectControl(this._constants.FRAME,e),r=this._selectControl(this._constants.VIDEO,e);s.width()>0&&(i=n.height(),t=parseInt(s.width()*this._instances[e].aspectRatio,10),undertone.creative.VideoPlayer.isIPhone?a.height(t+32):a.height(t),r.height(t),this._instances[e].params.verticallyCenter&&a.css("margin",(i-t)/2+"px 0px 0px 0px"))}return!0},_togglePlay:function(e){try{var t=$(e).attr(this._constants.DATA_ID),i=this._getVideo(t);return this.setPlayer(t),i?(i.paused()||i.ended()?(i.play(),undertone.creative.VideoPlayer.isTouch&&(this._redrawControls(t,!1),this._redrawControls(t,!1))):(i.pause(),undertone.creative.VideoPlayer.isTouch&&this._redrawControls(t,!0)),!i.paused()):null}catch(s){}},cleanUpID:function(e){return 0==e.indexOf("utvp_")&&(e=e.split("_"),e.length=e.length-1,e=e.join("_")),e},_postInit:function(e,t){if("object"!=typeof t||null===t._player_id||t._instances=={}||"undefined"==typeof t._instances[e])return null;var i=t._constants,s=t._instances[e],n=([i.COVER,i.VIDEO,i.PLAY_BTN,i.VOL_BTN,i.VOL_BAR,i.PROGRESS_BAR,i.PROGRESS_CLICK,i.VOL_CLICK,i.CONTROLS,i.CONTROL_COVER,i.PLAY_TOGGLE,i.PLAY_TOGGLE_WRAPPER,i.SLATE,i.TIME_CURRENT_TXT,i.TIME_DURATION_TXT],[i.PLAY_BTN,i.VOL_BTN,i.VOL_BAR,i.PROGRESS_BAR,i.TIME_CURRENT_TXT,i.TIME_DURATION_TXT],t._getVideo(e)),a=null;return n&&(s.params.volume>0?n.volume(s.params.volume):(s.params.volume=i.DEFAULT_VOLUME,t._unmutedVolume=i.DEFAULT_VOLUME,n.volume(i.DEFAULT_VOLUME),s.muted=!0),1==s.muted&&n.muted(!0)),a=t._selector(t._class_prefix+i.CONTROLS+"_"+t._uuid),a&&!s.params.hideControls&&a.css("display","block"),t._adjustAspectRatio(e),t._instances[e].video?(t._instances[e].video.paused()&&(t._showPlayToggle(!0,e),$("#"+t._class_prefix+i.PLAY_BTN+"_"+t._uuid).addClass(i.ICON_PLAY)),$("#"+t._class_prefix+i.PLAY_BTN+"_"+t._uuid+", #"+t._class_prefix+i.SLATE+"_"+t._uuid+", #"+t._class_prefix+i.PLAY_TOGGLE_WRAPPER+"_"+t._uuid).on("click",function(e){e&&(e.stopImmediatePropagation(),e.preventDefault());var i=$(this).attr(t._constants.DATA_ID);undertone.creative.trackEvent("CLICK",t.cleanUpID($(this).attr("id")),!0),t.isClickable(i)&&t._togglePlay(this)}),a=t._selectControl(i.COVER,e),a&&a.on("click",function(e){e&&(e.stopImmediatePropagation(),e.preventDefault());var i=$(this),n=i.attr(t._constants.DATA_ID),a=t._getVideo(n);1==t.isClickable(n)&&(s.hasClickThru?a.paused()?(undertone.creative.trackEvent("CLICK",t.cleanUpID($(this).attr("id")),!0),a.play()):(1==s.pauseOnClickThru&&a.pause(),s.params.clickID>0?undertone.creative.redirectTo(s.params.clickID,s.params.trackingID,!0):null!==s.params.clickThru&&""!==s.params.clickThru&&undertone.creative.redirectTo(s.params.clickThru,s.params.trackingID,!0)):(undertone.creative.trackEvent("CLICK",t.cleanUpID($(this).attr("id")),!0),a.paused()?a.play():a.pause()))}),a=t._selector(t._class_prefix+i.VOL_BTN+"_"+t._uuid),a&&a.on("click",function(e){e&&(e.stopImmediatePropagation(),e.preventDefault());var i,s=$(this).attr(t._constants.DATA_ID);1==t.isClickable(s)&&(undertone.creative.trackEvent("CLICK",t.cleanUpID($(this).attr("id")),!0),i=t._getVideo(s),i.muted(!i.muted()),t._redrawControls(s,!1))}),a=t._selector(t._class_prefix+i.PROGRESS_CLICK+"_"+t._uuid),a&&a.on("click",function(e){e&&(e.stopImmediatePropagation(),e.preventDefault());var s,n,a,r=$(this).attr(t._constants.DATA_ID);if(1==t.isClickable(r)&&1!=t._instances[r].disableSeeking){undertone.creative.trackEvent("CLICK",t.cleanUpID($(this).attr("id")),!0),s=t._getVideo(r),n=((e.pageX-$(this).offset().left)/t._selector(t._class_prefix+i.PROGRESS_BAR+"_"+t._uuid).width()).toFixed(5),a=null,s.buffered().length>0&&(a=(s.buffered().end(0)/s.duration()).toFixed(5));var o=n*s.duration(),l=s.currentTime();(undertone.creative.VideoPlayer.isTouch||a&&a>=n)&&(t._instances[t._player_id].seekedStopTracking=!0,o>l?t._trackEvent(t._events.video.SEEKED,r):l>o&&t._trackEvent(t._events.video.VIDEO_REPLAY,r),s.currentTime(o))}}),a=t._selector(t._class_prefix+i.VOL_CLICK+"_"+t._uuid),a&&a.on("click",function(e){e&&(e.stopImmediatePropagation(),e.preventDefault());var s=$(this).attr(t._constants.DATA_ID),n=t._getVideo(s),a=t._selector(t._class_prefix+i.VOL_BAR+"_"+t._uuid),r=((e.pageX-$(this).offset().left)/a.width()).toFixed(1);1==t.isClickable(s)&&(undertone.creative.trackEvent("CLICK",t.cleanUpID($(this).attr("id")),!0),n.volume(r),n.muted()&&n.muted(!1),t._redrawControls(s,!1))}),undertone.creative.VideoPlayer.isTouch||(a=t._selector(e),a&&(a.on("mouseenter",function(){1==s.playerInitialized&&1!=s.redrawingControls&&1==s.controlsMininized&&t._redrawControls($(this).attr("id"),!1)}),a.on("mouseleave",function(){!s.playerInitialized||s.redrawingControls||s.controlsMininized||t._redrawControls($(this).attr("id"),!0)}))),t._adjustResizables(!0,e),t._adjustAspectRatio(e),a=t._selector(t._class_prefix+i.CONTROL_COVER+"_"+t._uuid),a&&a.css("display","none"),t._redrawControls(e,!0),s.playerInitialized=!0,t._ready=!0,n=t._getVideo(e),n&&t._instances[e].playWhenReady&&n.play(),(!t.useHTML5||s.forceFlash)&&t.setSource(),!0):void 0},paused:function(e){if(e||(e=this._player_id),!e)return null;this.setPlayer(e);var t=this._getVideo(e);return t?t.paused():null},play:function(e){if(e||(e=this._player_id),!e)return null;this.setPlayer(e);var t=this._getVideo(e),i=this._instances[e];return i?(this._showPlayToggle(!1,e),i.canPlay&&i.ready||(i.playWhenReady=!0),t?(t.play(),1==i.playerInitialized&&1!=i.redrawingControls&&1==i.controlsMininized&&this._redrawControls(e,!1),!0):!1):null},pause:function(e){if(e||(e=this._player_id),!e||this._instances=={}||"undefined"==typeof this._instances[e])return null;this.setPlayer(e);var t=this._getVideo(e),i=this._instances[e];return t?(1==i.playerInitialized&&1!=i.redrawingControls&&0==i.controlsMininized&&this._redrawControls(e,!0),t.pause(),t.paused()):!1},currentTime:function(e,t,i){this.setPlayer(e);var s=this._getVideo(e);return s?(i&&!s.paused()&&s.pause(),"number"==typeof t?(s.currentTime(t),t):s.currentTime()):void 0},mute:function(e,t){if(t||(t=this._player_id),!t)return null;"boolean"!=typeof e&&(e=!0),this.setPlayer(t);var i=this._getVideo(t);return i?(i.muted(e),i.muted()):null},display:function(e,t){if(!t)return null;var i=e.attr("id"),s=null;if(i&&this._instances[i]){if(this.setPlayer(i),this._instances[i].hidden="none"==t,undertone.creative.VideoPlayer.isIE)$(e).css("display",t);else{var n="none"==t?"hidden":"visible";$(e).css("visibility",n)}return this._resizedEventThrottle(this),1==this._instances[i].hidden?!1:(s=this._getVideo(i),s&&s.currentTime()<1&&this._continuousPlay(),!this._instances[i].hidden)}return!1},hide:function(e){if(this._swfLoaded=!0,e=e||this._player_id,!e)return null;if("undefined"!=typeof this._instances[e]){var t=this._getVideo(e),i=this._events.HTML5,s=this._selectControl(this._constants.CONTROLS,e),n=this._selector(e).get(0);return t&&!t.paused()&&t.pause(),this._stopProgressTimer(e),this._stopPlayTimer(e),s.removeClass("full"),s.addClass("minimal"),this._instances[e].params.testing&&(this._removeEvent(n,i.LOADED_METADATA,$.proxy(this._videoLoadedMetadata,this)),this._removeEvent(n,i.LOADED_DATA,$.proxy(this._videoLoadedData,this)),this._removeEvent(n,i.DURATION_CHANGE,$.proxy(this._durationChange,this)),this._removeEvent(n,i.PLAYING,$.proxy(this._videoPlaying,this)),this._removeEvent(n,i.PAUSE,$.proxy(this._videoPaused,this)),this._removeEvent(n,i.PLAY,$.proxy(this._videoPlay,this)),this._removeEvent(n,i.VOL_CHANGE,$.proxy(this._videoVolumeChanged,this)),this._removeEvent(n,i.SEEKED,$.proxy(this._videoSeeked,this)),this._removeEvent(n,i.LOAD_START,$.proxy(this._videoLoadStart,this)),delete this._instances[e].video),!0}return null}}}var swfobject=!1;(-1==navigator.userAgent.indexOf("Safari")||-1!=navigator.userAgent.indexOf("Chrome"))&&(swfobject=function(){function e(){if(!W){try{var e=V.getElementsByTagName("body")[0].appendChild(y("span"));e.parentNode.removeChild(e)}catch(t){return}W=!0;for(var i=U.length,s=0;i>s;s++)U[s]()}}function t(e){W?e():U[U.length]=e}function i(e){if(typeof N.addEventListener!=O)N.addEventListener("load",e,!1);else if(typeof V.addEventListener!=O)V.addEventListener("load",e,!1);else if(typeof N.attachEvent!=O)v(N,"onload",e);else if("function"==typeof N.onload){var t=N.onload;N.onload=function(){t(),e()}}else N.onload=e}function s(){M?n():a()}function n(){var e=V.getElementsByTagName("body")[0],t=y(S);t.setAttribute("type",R);var i=e.appendChild(t);if(i){var s=0;!function(){if(typeof i.GetVariable!=O){var n=i.GetVariable("$version");n&&(n=n.split(" ")[1].split(","),j.pv=[parseInt(n[0],10),parseInt(n[1],10),parseInt(n[2],10)])}else if(10>s)return s++,setTimeout(arguments.callee,10),void 0;e.removeChild(t),i=null,a()}()}else a()}function a(){var e=B.length;if(e>0)for(var t=0;e>t;t++){var i=B[t].id,s=B[t].callbackFn,n={success:!1,id:i};if(j.pv[0]>0){var a=f(i);if(a)if(!m(B[t].swfVersion)||j.wk&&j.wk<312)if(B[t].expressInstall&&o()){var _={};_.data=B[t].expressInstall,_.width=a.getAttribute("width")||"0",_.height=a.getAttribute("height")||"0",a.getAttribute("class")&&(_.styleclass=a.getAttribute("class")),a.getAttribute("align")&&(_.align=a.getAttribute("align"));for(var u={},h=a.getElementsByTagName("param"),c=h.length,p=0;c>p;p++)"movie"!=h[p].getAttribute("name").toLowerCase()&&(u[h[p].getAttribute("name")]=h[p].getAttribute("value"));l(_,u,i,s)}else d(a),s&&s(n);else T(i,!0),s&&(n.success=!0,n.ref=r(i),s(n))}else if(T(i,!0),s){var y=r(i);y&&typeof y.SetVariable!=O&&(n.success=!0,n.ref=y),s(n)}}}function r(e){var t=null,i=f(e);if(i&&"OBJECT"==i.nodeName)if(typeof i.SetVariable!=O)t=i;else{var s=i.getElementsByTagName(S)[0];s&&(t=s)}return t}function o(){return!Y&&m("6.0.65")&&(j.win||j.mac)&&!(j.wk&&j.wk<312)}function l(e,t,i,s){Y=!0,P=s||null,D={success:!1,id:i};var n=f(i);if(n){"OBJECT"==n.nodeName?(A=_(n),C=null):(A=n,C=i),e.id=k,(typeof e.width==O||!/%$/.test(e.width)&&parseInt(e.width,10)<310)&&(e.width="310"),(typeof e.height==O||!/%$/.test(e.height)&&parseInt(e.height,10)<137)&&(e.height="137"),V.title=V.title.slice(0,47)+" - Flash Player Installation";var a=j.ie&&j.win?"ActiveX":"PlugIn",r="MMredirectURL="+N.location.toString().replace(/&/g,"%26")+"&MMplayerType="+a+"&MMdoctitle="+V.title;if(typeof t.flashvars!=O?t.flashvars+="&"+r:t.flashvars=r,j.ie&&j.win&&4!=n.readyState){var o=y("div");i+="SWFObjectNew",o.setAttribute("id",i),n.parentNode.insertBefore(o,n),n.style.display="none",function(){4==n.readyState?n.parentNode.removeChild(n):setTimeout(arguments.callee,10)}()}u(e,t,i)}}function d(e){if(j.ie&&j.win&&4!=e.readyState){var t=y("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(_(e),t),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}else e.parentNode.replaceChild(_(e),e)}function _(e){var t=y("div");if(j.win&&j.ie)t.innerHTML=e.innerHTML;else{var i=e.getElementsByTagName(S)[0];if(i){var s=i.childNodes;if(s)for(var n=s.length,a=0;n>a;a++)1==s[a].nodeType&&"PARAM"==s[a].nodeName||8==s[a].nodeType||t.appendChild(s[a].cloneNode(!0))}}return t}function u(e,t,i){var s,n=f(i);if(j.wk&&j.wk<312)return s;if(n)if(typeof e.id==O&&(e.id=i),j.ie&&j.win){var a="";for(var r in e)e[r]!=Object.prototype[r]&&("data"==r.toLowerCase()?t.movie=e[r]:"styleclass"==r.toLowerCase()?a+=' class="'+e[r]+'"':"classid"!=r.toLowerCase()&&(a+=" "+r+'="'+e[r]+'"'));var o="";for(var l in t)t[l]!=Object.prototype[l]&&(o+='<param name="'+l+'" value="'+t[l]+'" />');n.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+a+">"+o+"</object>",$[$.length]=e.id,s=f(e.id)}else{var d=y(S);d.setAttribute("type",R);for(var _ in e)e[_]!=Object.prototype[_]&&("styleclass"==_.toLowerCase()?d.setAttribute("class",e[_]):"classid"!=_.toLowerCase()&&d.setAttribute(_,e[_]));for(var u in t)t[u]!=Object.prototype[u]&&"movie"!=u.toLowerCase()&&h(d,u,t[u]);n.parentNode.replaceChild(d,n),s=d}return s}function h(e,t,i){var s=y("param");s.setAttribute("name",t),s.setAttribute("value",i),e.appendChild(s)}function c(e){var t=f(e);t&&"OBJECT"==t.nodeName&&(j.ie&&j.win?(t.style.display="none",function(){4==t.readyState?p(e):setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))}function p(e){var t=f(e);if(t){for(var i in t)"function"==typeof t[i]&&(t[i]=null);t.parentNode.removeChild(t)}}function f(e){var t=null;try{t=V.getElementById(e)}catch(i){}return t}function y(e){return V.createElement(e)}function v(e,t,i){e.attachEvent(t,i),G[G.length]=[e,t,i]}function m(e){var t=j.pv,i=e.split(".");return i[0]=parseInt(i[0],10),i[1]=parseInt(i[1],10)||0,i[2]=parseInt(i[2],10)||0,t[0]>i[0]||t[0]==i[0]&&t[1]>i[1]||t[0]==i[0]&&t[1]==i[1]&&t[2]>=i[2]?!0:!1}function g(e,t,i,s){if(!j.ie||!j.mac){var n=V.getElementsByTagName("head")[0];if(n){var a=i&&"string"==typeof i?i:"screen";if(s&&(I=null,w=null),!I||w!=a){var r=y("style");r.setAttribute("type","text/css"),r.setAttribute("media",a),I=n.appendChild(r),j.ie&&j.win&&typeof V.styleSheets!=O&&V.styleSheets.length>0&&(I=V.styleSheets[V.styleSheets.length-1]),w=a}j.ie&&j.win?I&&typeof I.addRule==S&&I.addRule(e,t):I&&typeof V.createTextNode!=O&&I.appendChild(V.createTextNode(e+" {"+t+"}"))}}}function T(e,t){if(H){var i=t?"visible":"hidden";W&&f(e)?f(e).style.visibility=i:g("#"+e,"visibility:"+i)}}function E(e){var t=/[\\"<>\.;]/,i=null!=t.exec(e);return i&&typeof encodeURIComponent!=O?encodeURIComponent(e):e}{var A,C,P,D,I,w,O="undefined",S="object",b="Shockwave Flash",L="ShockwaveFlash.ShockwaveFlash",R="application/x-shockwave-flash",k="SWFObjectExprInst",x="onreadystatechange",N=window,V=document,F=navigator,M=!1,U=[s],B=[],$=[],G=[],W=!1,Y=!1,H=!0,j=function(){var e=typeof V.getElementById!=O&&typeof V.getElementsByTagName!=O&&typeof V.createElement!=O,t=F.userAgent.toLowerCase(),i=F.platform.toLowerCase(),s=i?/win/.test(i):/win/.test(t),n=i?/mac/.test(i):/mac/.test(t),a=/webkit/.test(t)?parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,r=!1,o=[0,0,0],l=null;if(typeof F.plugins!=O&&typeof F.plugins[b]==S)l=F.plugins[b].description,!l||typeof F.mimeTypes!=O&&F.mimeTypes[R]&&!F.mimeTypes[R].enabledPlugin||(M=!0,r=!1,l=l.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),o[0]=parseInt(l.replace(/^(.*)\..*$/,"$1"),10),o[1]=parseInt(l.replace(/^.*\.(.*)\s.*$/,"$1"),10),o[2]=/[a-zA-Z]/.test(l)?parseInt(l.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof N.ActiveXObject!=O)try{var d=new ActiveXObject(L);d&&(l=d.GetVariable("$version"),l&&(r=!0,l=l.split(" ")[1].split(","),o=[parseInt(l[0],10),parseInt(l[1],10),parseInt(l[2],10)]))}catch(_){}return{w3:e,pv:o,wk:a,ie:r,win:s,mac:n}}();!function(){j.w3&&((typeof V.readyState!=O&&"complete"==V.readyState||typeof V.readyState==O&&(V.getElementsByTagName("body")[0]||V.body))&&e(),W||(typeof V.addEventListener!=O&&V.addEventListener("DOMContentLoaded",e,!1),j.ie&&j.win&&(V.attachEvent(x,function(){"complete"==V.readyState&&(V.detachEvent(x,arguments.callee),e())}),N==top&&!function(){if(!W){try{V.documentElement.doScroll("left")}catch(t){return setTimeout(arguments.callee,0),void 0}e()}}()),j.wk&&!function(){return W?void 0:/loaded|complete/.test(V.readyState)?(e(),void 0):(setTimeout(arguments.callee,0),void 0)}(),i(e)))}(),function(){j.ie&&j.win&&window.attachEvent("onunload",function(){for(var e=G.length,t=0;e>t;t++)G[t][0].detachEvent(G[t][1],G[t][2]);for(var i=$.length,s=0;i>s;s++)c($[s]);for(var n in j)j[n]=null;j=null;for(var a in swfobject)swfobject[a]=null;swfobject=null})}()}return{registerObject:function(e,t,i,s){if(j.w3&&e&&t){var n={};n.id=e,n.swfVersion=t,n.expressInstall=i,n.callbackFn=s,B[B.length]=n,T(e,!1)}else s&&s({success:!1,id:e})},getObjectById:function(e){return j.w3?r(e):void 0},embedSWF:function(e,i,s,n,a,r,d,_,h,c){var p={success:!1,id:i};j.w3&&!(j.wk&&j.wk<312)&&e&&i&&s&&n&&a?(T(i,!1),t(function(){s+="",n+="";var t={};if(h&&typeof h===S)for(var f in h)t[f]=h[f];t.data=e,t.width=s,t.height=n;var y={};if(_&&typeof _===S)for(var v in _)y[v]=_[v];if(d&&typeof d===S)for(var g in d)typeof y.flashvars!=O?y.flashvars+="&"+g+"="+d[g]:y.flashvars=g+"="+d[g];if(m(a)){var E=u(t,y,i);t.id==i&&T(i,!0),p.success=!0,p.ref=E}else{if(r&&o())return t.data=r,l(t,y,i,c),void 0;T(i,!0)}c&&c(p)})):c&&c(p)},switchOffAutoHideShow:function(){H=!1},ua:j,getFlashPlayerVersion:function(){return{major:j.pv[0],minor:j.pv[1],release:j.pv[2]}},hasFlashPlayerVersion:m,createSWF:function(e,t,i){return j.w3?u(e,t,i):void 0},showExpressInstall:function(e,t,i,s){j.w3&&o()&&l(e,t,i,s)},removeSWF:function(e){j.w3&&c(e)},createCSS:function(e,t,i,s){j.w3&&g(e,t,i,s)},addDomLoadEvent:t,addLoadEvent:i,getQueryParamValue:function(e){var t=V.location.search||V.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),null==e)return E(t);for(var i=t.split("&"),s=0;s<i.length;s++)if(i[s].substring(0,i[s].indexOf("="))==e)return E(i[s].substring(i[s].indexOf("=")+1))}return""},expressInstallCallback:function(){if(Y){var e=f(k);e&&A&&(e.parentNode.replaceChild(A,e),C&&(T(C,!0),j.ie&&j.win&&(A.style.display="block")),P&&P(D)),Y=!1}}}}()),Date.now||(Date.now=function(){return(new Date).getTime()}),window.undertone?window.undertone.creative||(window.undertone.creative={trackEvent:function(){},addEventListener:function(){},redirectTo:function(){},videoplayer:{}}):window.undertone={creative:{videoplayer:{}}},Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){for(var i=t||0,s=this.length;s>i;i++)if(this[i]==e)return i;return-1}),"function"!=typeof Object.create&&(Object.create=function(e){function t(){}return t.prototype=e,new t}),window.undertone.creative.VideoPlayer||(window.undertone.creative.VideoPlayer=function(){var e=/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)||navigator&&navigator.platform&&/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.platform),t=/iPhone/i.test(navigator.userAgent)||/iPhone/i.test(navigator.platform),i=/iPad/i.test(navigator.platform)&&"OS 5"==navigator.appVersion.match(/OS \d+/);return isAndroid=/Android/i.test(navigator.userAgent)||/Android/i.test(navigator.platform),isIE=window.navigator.appVersion.indexOf("MSIE")>-1,isTouch="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0||"undefined"!=typeof window.DocumentTouch&&window.DocumentTouch&&document instanceof DocumentTouch,addNewStyle=function(e){var t=document.createElement("style");t.type="text/css",document.getElementsByTagName("head")[0].appendChild(t);try{t.appendChild(document.createTextNode(e))}catch(i){t.styleSheet.cssText+=e}},_videoPlayerWrappers={},supportedCodecs={all:[],html5:[],flash:[]},storeVideoPlayerWrapper=function(e,t){_videoPlayerWrappers[e]||(_videoPlayerWrappers[e]=t)},getVideoPlayerWrapper=function(e){return _videoPlayerWrappers[e]},setCodecSupport=function(){var e=$("<video></video>").get(0),t={},i="";"function"==typeof e.canPlayType&&(i=e.canPlayType("video/mp4"),("probably"==i||"maybe"==i)&&(supportedCodecs.html5.push("mp4"),supportedCodecs.all.push("mp4")),i=e.canPlayType("video/webm"),("probably"==i||"maybe"==i)&&(supportedCodecs.html5.push("webm"),supportedCodecs.all.push("webm"))),swfobject&&(t=swfobject.getFlashPlayerVersion(),t&&t.major>8&&(supportedCodecs.all.indexOf("mp4")<0&&supportedCodecs.all.push("mp4"),supportedCodecs.flash=["mp4"]))},getSupportedCodecs=function(){return supportedCodecs},HTML5VideoPlayer=function(){return{seekedStopTracking:!1,lastCurrentTime:null,lastTime:null,ele:null,_html5:!0,videoDuration:0,hasElement:function(){return this.ele?!0:!1},getElement:function(){return this.ele},setSize:function(){return!0},buffered:function(){if(this.hasElement()){var e=this.ele.buffered;return{length:e.length,start:function(t){return e&&e.start&&t<e.length?e.start(t):0
},end:function(t){return e&&e.end&&t<e.length?e.end(t):0}}}return null},currentTime:function(e){if(this.hasElement())try{return"undefined"!=typeof e&&(this.ele.currentTime=e),this.ele.currentTime}catch(t){return 0}return null},duration:function(){var e=this.videoDuration,t=0;return this.hasElement()?(t=this.ele.duration,t>0&&(e=t,this.videoDuration=t),e):null},ended:function(){return this.hasElement()?this.ele.ended:null},error:function(){return this.hasElement()?this.ele.error:null},muted:function(e){return this.hasElement()?("undefined"!=typeof e&&(this.ele.muted=e),this.ele.muted):null},paused:function(){return this.hasElement()?this.ele.paused:!1},seeking:function(){return this.hasElement()?this.ele.seeking:null},src:function(e){return this.hasElement()?"undefined"==typeof e?this.ele.src:this.load(e):null},volume:function(e){return this.hasElement()?("undefined"!=typeof e&&(this.ele.volume=e),this.ele.volume):null},init:function(e,t){return"undefined"==typeof e||"boolean"!=typeof t?!1:(this.ele=e,this._html5=t,!0)},load:function(e){return this.hasElement()?(this.ele.load(e),!0):null},play:function(){return this.hasElement()?this.paused()?(this.ele.play(),!0):!1:null},pause:function(){return this.hasElement()?!this.paused()&&this.ele.pause?(this.ele.pause(),!0):!1:null},readyState:function(){return this.hasElement()?this.ele.readyState:null},networkState:function(){return this.hasElement()?this.ele.networkState:null}}},FlashVideoPlayer=function(){return{seekedStopTracking:!1,lastCurrentTime:null,lastTime:null,ele:null,_html5:!0,videoDuration:0,hasElement:function(){return this.ele?!0:!1},getElement:function(){return this.ele},setSize:function(e,t){return this.hasElement()&&this.ele.setSize?(this.ele.setSize(e,t),!0):!1},buffered:function(){if(this.hasElement()){var e=this.ele.bufferedVideo();return{length:e.start.length,start:function(t){return e&&e.start&&t<e.start.length?e.start[t]:0},end:function(t){return e&&e.end&&t<e.end.length?e.end[t]:this.duration()}}}return null},currentTime:function(e){if(this.hasElement())try{return"undefined"!=typeof e&&this.ele.currentTime(e),"function"==typeof this.ele.currentTime?this.ele.currentTime():0}catch(t){return 0}return null},duration:function(){var e=this.videoDuration,t=0;return this.hasElement()?(t="function"==typeof this.ele.duration?this.ele.duration():0,t>0&&(e=t,this.videoDuration=e),e):null},ended:function(){return this.hasElement()?"function"==typeof this.ele.ended?this.ele.ended():null:null},error:function(){return this.hasElement()?this.ele.videoError():null},muted:function(e){return this.hasElement()?("undefined"!=typeof e&&this.ele.muted(e),this.ele.muted(e)):null},paused:function(){return this.hasElement()?this.ele.videoPaused&&this.ele.videoPaused():!1},seeking:function(){return this.hasElement()?this.ele.seeking():null},src:function(e){return this.hasElement()?"undefined"==typeof e?this.ele.src():this.load(e):null},volume:function(e){return this.hasElement()?("undefined"!=typeof e&&this.ele.volume(e),this.ele.volume()):null},init:function(e,t){return"undefined"==typeof e||"boolean"!=typeof t?!1:(this.ele=e,this._html5=t,!0)},load:function(e){return this.hasElement()?(this.ele.load(e),!0):null},play:function(){return this.hasElement()?this.paused()?(this.ele.playVideo(),!0):!1:null},pause:function(){return this.hasElement()?this.paused()?!1:(this.ele.pauseVideo(),!0):null},readyState:function(){return this.hasElement()?this.ele.readyState2():null},networkState:function(){return this.hasElement()?this.ele.networkState2():null}}},setCodecSupport(),{isMobile:e,isIPhone:t,isAndroid:isAndroid,isIE:isIE,isTouch:isTouch,addNewStyle:addNewStyle,storeVideoPlayerWrapper:storeVideoPlayerWrapper,getVideoPlayerWrapper:getVideoPlayerWrapper,getSupportedCodecs:getSupportedCodecs,HTML5VideoPlayer:HTML5VideoPlayer,FlashVideoPlayer:FlashVideoPlayer,isIPadv1:i}}(),window.undertone.creative.VideoPlayer.addNewStyle('@font-face{font-family:"ut_videoplayer";src:url("fonts/ut_videoplayer.eot?51k08v");src:url("fonts/ut_videoplayer.eot?#iefix51k08v")format("embedded-opentype"),url("fonts/ut_videoplayer.ttf?51k08v")format("truetype"),url("fonts/ut_videoplayer.woff?51k08v")format("woff"),url("fonts/ut_videoplayer.svg?51k08v#ut_videoplayer")format("svg");font-weight:normal;font-style:normal;}.icon-play,.icon-pause,.icon-volume-high,.icon-volume-medium,.icon-volume-low,.icon-volume-mute,.icon-replay,.icon-waiting,.icon-connection,.icon-connection2,.icon-play-toggle {font-family: "ut_videoplayer";speak: none;font-style: normal;font-weight: normal;font-variant: normal;text-transform: none;line-height: 1;-webkit-font-smoothing: antialiased;} .icon-connection:before{content:"\\e600";}.icon-play:before{content:"\\e601";} .icon-pause:before{content:"\\e602";} .icon-play-toggle:before{content:"\\e603";} .icon-volume-high:before{content:"\\e604";} .icon-volume-mute:before{content:"\\e605";} .icon-replay:before{content:"\\e606";} .utvp_video{background-color:#000;width:100%;height:inherit;cursor:pointer;}.utvp_player_frame{width:100%;height:100%;position:relative;margin:0px 0px 0px 0px;padding:0px 0px 0px 0px;border:0;overflow:hidden;text-align:center;background-color:#000000;}.utvp_cover{width:100%;height:100%;position:absolute;top:0px;left:0px;padding:0px 0px 0px 0px;margin:0px 0px 0px 0px;cursor:pointer;border:0;background:#000000;-ms-filter:"alpha(Opacity=0)";opacity:0.0;-moz-opacity:0.0;-khtml-opacity:0.0;}.utvp_slate{width:100%;height:100%;overflow:hidden;position:absolute;top:0px;left:0px;padding:0px 0px 0px 0px;margin:0px 0px 0px 0px;background-color:#000000;background-image:none;cursor:pointer;border:0;background-position:center center;background-repeat:no-repeat;background-size:cover}.utvp_slate{border:0}.utvp_controls{bottom:0px;left:0px;position:absolute;width:100%;padding:0px 0px 0px 0px;margin:0px 0px 0px 0px;display:inline-block}.utvp_control-bar-background{position:absolute;left:0px;top:0px;width:100%;height:100%;background-color:#222222;-ms-filter:"alpha(Opacity=20)";opacity:.2;-moz-opacity:.2;-khtml-opacity:.2}.utvp_controls.full{height:32px;text-align:left}.utvp_controls.minimal{height:32px}.utvp_controls.full .utvp_control-bar-background{display:block;}.utvp_controls.minimal .utvp_control-bar-background{display:none;}.utvp_controls.full .utvp_progress_bar{width:40%;height:12px;padding:0;margin:0;position:relative;overflow:hidden;display:inline-block;vertical-align:middle;background-color:#222222} .utvp_progress_click{height:100%;width:100%;position:absolute;top:0px;left:0px;cursor:pointer;overflow:hidden}.utvp_progress_back{width:100%;height:100%;background-color:#333333;position:absolute;overflow:hidden;top:0;left:0}.utvp_progress_down{width:0;height:100%;background-color:#CECECE;position:absolute;overflow:hidden;top:0px;left:0px}.utvp_progress_current{width:0px;height:100%;background-color:#FFFFFF;position:absolute;overflow:hidden;top:0px;left:0px}.utvp_controls.full .utvp_volume_bar{width:10%;height:10px;top:10px;vertical-align:middle;background-color:#222222;position:absolute;right:4%}.utvp_controls.full .utvp_volume_slider{top:0px;width:0%;height:100%;background-color:#FFFFFF;position:absolute;overflow:hidden}.utvp_controls.full .utvp_volume_click{position:absolute;top:0px;left:0px;width:100%;height:100%;background-color:#FFFFFF;opacity:.0;filter:alpha(opacity=0);cursor:pointer;position:absolute;overflow:hidden}.utvp_play_toggle{font-size:7em;position:absolute;top:0;left:0;margin:0;padding:0;line-height:150px;width:150px;max-width:100%;color:#FFFFFF;cursor:pointer;}.utvp_play_btn{-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";display:inline-block;font-size:1.1em;width:1.6em;text-align:center;position:relative;vertical-align:middle;overflow:hidden;color:#FFFFFF;height:32px;line-height:32px}.utvp_volume_btn{-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";font-size:.9em;position:absolute;vertical-align:middle;right:15%;top:0px;color:#FFFFFF;line-height:32px}.utvp_control_bar_buttons:hover{color:#f7e90e;}.utvp_time_current{display:inline-block;position:relative;color:#CCCCCC;padding:0px 0px 0px 5px;}.utvp_time_duration{display:inline-block;position:relative;color:#666666;padding:0px 0px 0px 5px;}.utvp_text_display{font-size:.8em;height:32px;display:inline-block;line-height:32px;vertical-align:middle;padding:auto;margin:0px 0px 0px 0px;font-weight:700;font-family:Courier,CourierNewPS-BoldMT,\'Courier New Bold\',\'Courier New Fett\',monospace;-webkit-font-smoothing:antialiased}.utvp_controls.full .utvp_control_bar_buttons{cursor:pointer;overflow:hidden}.utvp_controls .minimal{background-color:none}.utvp_controls.minimal .utvp_progress_bar{margin:0px 0px 0px 0px;padding:0px 0px 0px 0px;height:7px;position:absolute;left:0px;bottom:0px;overflow:hidden;width:100%}.utvp_controls.minimal .utvp_progress_back{bottom:0px;margin:0px 0px 0px 0px;padding:0px 0px 0px 0px;height:100%;overflow:hidden}.utvp_controls.minimal .utvp_progress_down{bottom:0px;margin:0px 0px 0px 0px;padding:0px 0px 0px 0px;overflow:hidden}.utvp_controls.minimal .utvp_progress_current{bottom:0px;margin:0px 0px 0px 0px;padding:0px 0px 0px 0px;overflow:hidden}.utvp_controls.minimal .utvp_progress_click{bottom:0px;margin:0px 0px 0px 0px;padding:0px 0px 0px 0px;overflow:hidden}.utvp_controls.minimal .utvp_play_btn{display:none;overflow:hidden}.utvp_controls.minimal .utvp_volume_btn{ display: none; overflow:hidden}.utvp_controls.minimal .utvp_time_current{display: none; overflow:hidden}.utvp_controls.minimal .utvp_time_duration{ display: none; }.utvp_controls.full .utvp_time_current{}.utvp_controls.full .utvp_time_duration{}.utvp_play_toggle{display:inline-block;position:relative}.utvp_play_toggle_wrapper_insert{text-align:center;display:block;height:100%;width:100%;position:absolute;top:0px;left:0px;cursor:pointer;background:#000000;-ms-filter:"alpha(Opacity=0)";opacity:0.0;-moz-opacity:0.0;-khtml-opacity:0.0;}.utvp_play_toggle_wrapper{text-align:center;display:block;height:100%;width:100%;position:absolute;top:0px;left:0px;}.utvp_play_toggle_wrapper:before{content:\'\';display:inline-block;height:100%;vertical-align:middle;margin-right:-.25em}.utvp_play_toggle_wrapper>.icon-play-toggle{-ms-filter:"alpha(Opacity=30)";opacity:.3;-moz-opacity:.3;-khtml-opacity:.3;display:inline-block;vertical-align:middle}.utvp_buffer_wrapper{text-align:left;display:inline-block;height:26px;width:26px;position:absolute;top:4px;right:6px;}.utvp_buffer_wrapper:before{content:\'\';display:inline-block;height:100%;vertical-align:middle;margin-right:-.25em;}.utvp_buffer_indicator{background-color:#000000;font-size:1.1em;position:absolute;top:0px;left:0px;margin:0;padding:0;line-height:26px;width:26px;color:#FFFFFF;cursor:pointer;-ms-filter:"alpha(Opacity=50)";opacity:0.5;-moz-opacity:0.5;-khtml-opacity:0.5}.utvp_video_swf{position:absolute;left:0px;top:0px;}'));var ut_videoplayer,root;root="undefined"!=typeof window&&null!==window?window:global,root.ut_videoplayer=ut_videoplayer={videoPlayer:null,init:function(e,t){var i=$(t).attr("data-uuid");!e.testing&&i&&(this.videoPlayer=undertone.creative.VideoPlayer.getVideoPlayerWrapper(i)),this.videoPlayer||(this.videoPlayer=new VideoPlayer),e&&(i=this.videoPlayer.init(e,t)),i&&($(t).attr("data-uuid",i),undertone.creative.VideoPlayer.storeVideoPlayerWrapper(i,this.videoPlayer))},getVideoPlayerWrapper:function(e){return undertone.creative.VideoPlayer.getVideoPlayerWrapper(e)}},$.fn.ut_videoplayer=function(e){return this.each(function(){try{var t=Object.create(ut_videoplayer),i=$(this);t.init(e,this),i.data("ut_videoplayer",t)}catch(s){}})},$.fn.mute=function(e){var t=ut_videoplayer.getVideoPlayerWrapper(this.attr("data-uuid"));return t&&t.mute(e,this.attr("id"))},$.fn.paused=function(){var e=ut_videoplayer.getVideoPlayerWrapper(this.attr("data-uuid"));return e&&e.paused(this.attr("id"))},$.fn.play=function(){var e=ut_videoplayer.getVideoPlayerWrapper(this.attr("data-uuid"));return e&&e.play(this.attr("id"))},$.fn.pause=function(){var e=ut_videoplayer.getVideoPlayerWrapper(this.attr("data-uuid"));return e&&e.pause(this.attr("id"))},$.fn.clickable=function(e){var t=ut_videoplayer.getVideoPlayerWrapper(this.attr("data-uuid"));return t&&t.clickable(this.attr("id"),e)},$.fn.isClickable=function(){var e=ut_videoplayer.getVideoPlayerWrapper(this.attr("data-uuid"));return e&&e.isClickable(this.attr("id"))},$.fn.setSource=function(e){var t=ut_videoplayer.getVideoPlayerWrapper(this.attr("data-uuid"));return t&&t.setSource(this.attr("id"),e)},$.fn.hidePlayer=function(){var e=ut_videoplayer.getVideoPlayerWrapper(this.attr("data-uuid"));return e&&e.display(this,"none"),e&&e.hide(this.attr("id"))},$.fn.showPlayer=function(e){e=!!e;var t=ut_videoplayer.getVideoPlayerWrapper(this.attr("data-uuid"));t&&t.display(this,"block")&&t._redrawControls(t._player_id,!0),e&&t.play(this.attr("id"))},$.fn.close=function(){var e=undertone.creative.VideoPlayer.getVideoPlayerWrapper(this.attr("data-uuid"));return e&&e.display(this,"none"),e&&e.hide(this.attr("id"))};