window.matchMedia=window.matchMedia||function(doc,undefined){var bool,docElem=doc.documentElement,refNode=docElem.firstElementChild||docElem.firstChild,fakeBody=doc.createElement("body"),div=doc.createElement("div");div.id="mq-test-1";div.style.cssText="position:absolute;top:-100em";fakeBody.style.background="none";fakeBody.appendChild(div);return function(q){div.innerHTML='&shy;<style media="'+q+'"> #mq-test-1 { width: 42px; }</style>';docElem.insertBefore(fakeBody,refNode);bool=div.offsetWidth==42;docElem.removeChild(fakeBody);return{matches:bool,media:q}}}(document);(function(win){win.respond={};respond.update=function(){};respond.mediaQueriesSupported=win.matchMedia&&win.matchMedia("only all").matches;if(respond.mediaQueriesSupported){return}var doc=win.document,docElem=doc.documentElement,mediastyles=[],rules=[],appendedEls=[],parsedSheets={},resizeThrottle=30,head=doc.getElementsByTagName("head")[0]||docElem,base=doc.getElementsByTagName("base")[0],links=head.getElementsByTagName("link"),requestQueue=[],tm=null,getDecimalValueByName=function(propValue,propName){var re=new RegExp("\\("+propName+":[\\s]*([\\s]*[0-9\\.]+)(px|em)[\\s]*\\)");return propValue.match(re)&&parseFloat(RegExp.$1)+(RegExp.$2||"")},ripCSS=function(){var sheets=links,sl=sheets.length,i=0,l,elm,inlineStyleContent,sheet,href,media,isCSS;for(;i<sl;i++){sheet=sheets[i],href=sheet.href,media=sheet.media,isCSS=sheet.rel&&sheet.rel.toLowerCase()==="stylesheet";if(!!href&&isCSS&&!parsedSheets[href]){if(sheet.styleSheet&&sheet.styleSheet.rawCssText){translate(sheet.styleSheet.rawCssText,href,media);parsedSheets[href]=true}else{if(!/^([a-zA-Z:]*\/\/)/.test(href)&&!base||href.replace(RegExp.$1,"").split("/")[0]===win.location.host){requestQueue.push({href:href,media:media})}}}}makeRequests()},makeRequests=function(){if(requestQueue.length){var thisRequest=requestQueue.shift();ajax(thisRequest.href,function(styles){translate(styles,thisRequest.href,thisRequest.media);parsedSheets[thisRequest.href]=true;makeRequests()})}},translate=function(styles,href,media){href=href||"";media=media||"";var qs=styles.match(/@media[^\{]+\{([^\{\}]*\{[^\}\{]*\})+/gi),ql=qs&&qs.length||0,href=href.substring(0,href.lastIndexOf("/")),repUrls=function(css){return css.replace(/(url\()['"]?([^\/\)'"][^:\)'"]+)['"]?(\))/g,"$1"+href+"$2$3")},useMedia=!ql&&media,i=0,j,fullq,thisq,eachq,eql;if(href.length){href+="/"}if(useMedia){ql=1}for(;i<ql;i++){j=0;if(useMedia){fullq=media;rules.push(repUrls(styles))}else{fullq=qs[i].match(/@media *([^\{]+)\{([\S\s]+?)$/)&&RegExp.$1;rules.push(RegExp.$2&&repUrls(RegExp.$2))}eachq=fullq.split(",");eql=eachq.length;for(;j<eql;j++){thisq=eachq[j];mediastyles.push({media:thisq.split("(")[0].match(/(only\s+)?([a-zA-Z]+)\s?/)&&RegExp.$2||"all",rules:rules.length-1,hasquery:thisq.indexOf("(")>-1,minw:getDecimalValueByName(thisq,"min-width"),maxw:getDecimalValueByName(thisq,"max-width"),minh:getDecimalValueByName(thisq,"min-height"),maxh:getDecimalValueByName(thisq,"max-height")})}}tm&&window.clearTimeout(tm);tm=window.setTimeout(function(){applyMedia()},50)},lastCall,resizeDefer,getEmValue=function(){var ret,div=doc.createElement("div"),body=doc.body,fakeUsed=false;div.style.cssText="position:absolute;font-size:1em;width:1em";if(!body){body=fakeUsed=doc.createElement("body");body.style.background="none"}body.appendChild(div);docElem.insertBefore(body,docElem.firstChild);ret=div.offsetWidth;if(fakeUsed){docElem.removeChild(body)}else{body.removeChild(div)}ret=eminpx=parseFloat(ret);return ret},getCSSRuleValue=function(rule){return parseFloat(rule)*(rule.indexOf("em")>-1?eminpx||getEmValue():1)},eminpx,applyMedia=function(fromResize){var nameW="offsetWidth",nameH="offsetHeight",docElemPropW=docElem[nameW],docElemPropH=docElem[nameH],currWidth=doc.compatMode==="CSS1Compat"&&docElemPropW||doc.body[nameW]||docElemPropW,currHeight=doc.compatMode==="CSS1Compat"&&docElemPropH||doc.body[nameH]||docElemPropH,styleBlocks={},lastLink=links[links.length-1],now=(new Date).getTime(),i=0,l=0;if(currWidth==0||currHeight==0){setTimeout(applyMedia,resizeThrottle);return}if(fromResize&&lastCall&&now-lastCall<resizeThrottle){clearTimeout(resizeDefer);resizeDefer=setTimeout(applyMedia,resizeThrottle);return}else{lastCall=now}for(i=0,l=mediastyles.length;i<l;i++){var thisstyle=mediastyles[i],minw=thisstyle.minw,maxw=thisstyle.maxw,minh=thisstyle.minh,maxh=thisstyle.maxh,minwnull=minw===null,maxwnull=maxw===null,minhnull=minh===null,maxhnull=maxh===null;if(!minwnull){minw=getCSSRuleValue(minw)}if(!maxwnull){maxw=getCSSRuleValue(maxw)}if(!minhnull){minh=getCSSRuleValue(minh)}if(!maxhnull){maxh=getCSSRuleValue(maxh)}if(!thisstyle.hasquery||(!minwnull||!maxwnull)&&(minwnull||currWidth>=minw)&&(maxwnull||currWidth<=maxw)||(!minhnull||!maxhnull)&&(minhnull||currHeight>=minh)&&(maxhnull||currHeight<=maxh)){if(!styleBlocks[thisstyle.media]){styleBlocks[thisstyle.media]=[]}styleBlocks[thisstyle.media].push(rules[thisstyle.rules])}}for(i=0,l=appendedEls.length;i<l;i++){if(appendedEls[i]&&appendedEls[i].parentNode===head){head.removeChild(appendedEls[i])}}for(var i in styleBlocks){if(styleBlocks.hasOwnProperty(i)){var ss=doc.createElement("style"),css=styleBlocks[i].join("\n");ss.type="text/css";ss.media=i;head.insertBefore(ss,lastLink.nextSibling);if(ss.styleSheet){ss.styleSheet.cssText=css}else{ss.appendChild(doc.createTextNode(css))}appendedEls.push(ss)}}},ajax=function(url,callback){var req=xmlHttp();if(!req){return}req.open("GET",url,true);req.onreadystatechange=function(){if(req.readyState!=4||req.status!=200&&req.status!=304){return}callback(req.responseText)};if(req.readyState==4){return}req.send(null)},xmlHttp=function(){var xmlhttpmethod=false;try{xmlhttpmethod=new XMLHttpRequest}catch(e){xmlhttpmethod=new ActiveXObject("Microsoft.XMLHTTP")}return function(){return xmlhttpmethod}}();ripCSS();respond.update=ripCSS;function callMedia(){applyMedia(true)}if(win.addEventListener){win.addEventListener("resize",callMedia,false)}else if(win.attachEvent){win.attachEvent("onresize",callMedia)}})(this);